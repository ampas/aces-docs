
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../specification/">
      
      
        <link rel="next" href="../../system-components/input-transforms/capture-guide/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>CLF Implementation Guide - ACES Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17%2013h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Pontano+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Pontano Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#common-lut-format-clf-implementation-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://www.acescentral.com" title="ACES Documentation" class="md-header__button md-logo" aria-label="ACES Documentation" data-md-component="logo">
      
  <img src="../../assets/images/aces-acescentral-color.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ACES Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CLF Implementation Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2c3.87 0 7 3.13 7 7 0 2.38-1.19 4.47-3 5.74V17c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2.26C3.19 13.47 2 11.38 2 9c0-3.87 3.13-7 7-7M6 21v-1h6v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1M9 4C6.24 4 4 6.24 4 9c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58 0-2.76-2.24-5-5-5m10 9h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9zm-2.15 5.65L18 15l1.15 3.65z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="aces-light" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Introduction

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../home-technical/" class="md-tabs__link">
          
  
  
  Technical Details

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../glossary/" class="md-tabs__link">
        
  
  
    
  
  Glossary

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.acescentral.com" title="ACES Documentation" class="md-nav__button md-logo" aria-label="ACES Documentation" data-md-component="logo">
      
  <img src="../../assets/images/aces-acescentral-color.png" alt="logo">

    </a>
    ACES Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overview of ACES
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Overview of ACES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACES System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Encodings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/input-transforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Input Transforms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Output Transforms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/look-transforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Look Transforms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rgc/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reference Gamut Compression
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../amf/guides/user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACES Metadata File (AMF)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/organization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reference Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Common LUT Format
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    About ACES 2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            About ACES 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/about-aces-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/about-rendering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rendering Transform
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Background Information
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Background Information
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/v1-feedback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACES 1 Feedback
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/listening-tour/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Listening Tour
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Technical Details
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Technical Details
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../home-technical/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Encodings
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Encodings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/aces2065-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACES2065-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/acescg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACEScg
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/acescct/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACEScct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/acescc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACEScc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/acesproxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACESproxy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/apd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    APD (Academy Printing Density)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encodings/adx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADX (Academy Density Exchange)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../white-point/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Derivation of the ACES White Point
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    File Formats
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            File Formats
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_1" >
        
          
          <label class="md-nav__link" for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ACES Metadata File (AMF)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1">
            <span class="md-nav__icon md-icon"></span>
            ACES Metadata File (AMF)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../amf/specification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../amf/guides/implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implementation Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Common LUT Format
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Common LUT Format
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Implementation Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Implementation Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format-comparison-table" class="md-nav__link">
    <span class="md-ellipsis">
      Format Comparison Table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-audience" class="md-nav__link">
    <span class="md-ellipsis">
      Target Audience
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-quick-introduction-to-clf" class="md-nav__link">
    <span class="md-ellipsis">
      A Quick Introduction to CLF
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-source-example-implemention" class="md-nav__link">
    <span class="md-ellipsis">
      Open Source Example Implemention
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Open Source Example Implemention">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ociochecklut" class="md-nav__link">
    <span class="md-ellipsis">
      ociochecklut
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ocioconvert" class="md-nav__link">
    <span class="md-ellipsis">
      ocioconvert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ociomakeclf" class="md-nav__link">
    <span class="md-ellipsis">
      ociomakeclf
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minimum-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Minimum Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Minimum Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction_1" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finishing-tier" class="md-nav__link">
    <span class="md-ellipsis">
      Finishing Tier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-tier" class="md-nav__link">
    <span class="md-ellipsis">
      Preview Tier
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-clfs" class="md-nav__link">
    <span class="md-ellipsis">
      Reading CLFs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reading CLFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-parsing-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      General Parsing Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clf-file-test-suite" class="md-nav__link">
    <span class="md-ellipsis">
      CLF File Test Suite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-procedure" class="md-nav__link">
    <span class="md-ellipsis">
      Test Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applying" class="md-nav__link">
    <span class="md-ellipsis">
      Applying CLFs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Applying CLFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    <span class="md-ellipsis">
      General
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finishing-tier_1" class="md-nav__link">
    <span class="md-ellipsis">
      Finishing Tier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-tier_1" class="md-nav__link">
    <span class="md-ellipsis">
      Preview Tier
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing" class="md-nav__link">
    <span class="md-ellipsis">
      Writing CLFs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing CLFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-extension" class="md-nav__link">
    <span class="md-ellipsis">
      File Extension
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indentation" class="md-nav__link">
    <span class="md-ellipsis">
      Indentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-of-xml-comments" class="md-nav__link">
    <span class="md-ellipsis">
      Use of XML Comments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discrete-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Discrete Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#precision-and-range-of-numeric-values" class="md-nav__link">
    <span class="md-ellipsis">
      Precision and Range of Numeric Values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-id-attribute" class="md-nav__link">
    <span class="md-ellipsis">
      The id Attribute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-of-proprietary-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Storage of Proprietary Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-metadata-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Other Metadata Considerations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helpful-hints-for-a-successful-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Helpful Hints for a Successful Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Helpful Hints for a Successful Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matrix-order" class="md-nav__link">
    <span class="md-ellipsis">
      Matrix Order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lut3d-serialization-order" class="md-nav__link">
    <span class="md-ellipsis">
      LUT3D Serialization Order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gamma-polarity" class="md-nav__link">
    <span class="md-ellipsis">
      Gamma Polarity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-depth-attributes-dont-affect-processing-precision" class="md-nav__link">
    <span class="md-ellipsis">
      Bit-Depth Attributes Don't Affect Processing Precision
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-between-bit-depths" class="md-nav__link">
    <span class="md-ellipsis">
      Conversion Between Bit-Depths
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendices" class="md-nav__link">
    <span class="md-ellipsis">
      Appendices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#annexA" class="md-nav__link">
    <span class="md-ellipsis">
      Annex A: Test Image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexB" class="md-nav__link">
    <span class="md-ellipsis">
      Annex B: CLF Test Suite Listing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexC" class="md-nav__link">
    <span class="md-ellipsis">
      Annex C: Finishing Tier Apply Test CLF List
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexD" class="md-nav__link">
    <span class="md-ellipsis">
      Annex D: Preview Tier Apply Test CLF List
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexE" class="md-nav__link">
    <span class="md-ellipsis">
      Annex E: Baking a CLF for Preview Tier Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexF" class="md-nav__link">
    <span class="md-ellipsis">
      Annex F: Using CLF to represent ACES Look Transforms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexG" class="md-nav__link">
    <span class="md-ellipsis">
      Annex G: Using CLF with AMF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexH" class="md-nav__link">
    <span class="md-ellipsis">
      Annex H: Identity (no-op) CLF example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexI" class="md-nav__link">
    <span class="md-ellipsis">
      Annex I: Infinity and NaN handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexJ" class="md-nav__link">
    <span class="md-ellipsis">
      Annex J: Python code for creating the Preview Tier test LUT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexK" class="md-nav__link">
    <span class="md-ellipsis">
      Annex K: Generation of the reference images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Transforms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Transforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4_1" >
        
          
          <label class="md-nav__link" for="__nav_2_4_1" id="__nav_2_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Input Transforms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            Input Transforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.dropbox.com/scl/fi/o0az9azz833t1sde8apfz/P-2013-001.pdf?rlkey=j7eqd4l0wpvbhpi72ayjvflka&e=1&dl=0" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Procedure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/input-transforms/capture-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Capture Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4_2" >
        
          
          <label class="md-nav__link" for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Output Transforms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            Output Transforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_4_2_1" id="__nav_2_4_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Structure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2_1">
            <span class="md-nav__icon md-icon"></span>
            Structure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/technical-details/rendering-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/technical-details/tone-mapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tone Mapping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/technical-details/chroma-compression/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chroma Compression
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/technical-details/gamut-compression/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gamut Compression
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/technical-details/white-limiting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    White Limiting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/technical-details/display-encoding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Display Encoding
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/parameters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Preset Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/output-transforms/implementer-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implementor Notes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4_3" >
        
          
          <label class="md-nav__link" for="__nav_2_4_3" id="__nav_2_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Look Transforms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_3">
            <span class="md-nav__icon md-icon"></span>
            Look Transforms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/look-transforms/use-cases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Cases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/look-transforms/specification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Specification
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4_4" id="__nav_2_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference Gamut Compression
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_4">
            <span class="md-nav__icon md-icon"></span>
            Reference Gamut Compression
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rgc/specification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rgc/guides/rgc-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implementation Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rgc/guides/rgc-user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system-components/transform-id-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transform IDs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.smpte.org/standards/aces-standards" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACES Standards
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#format-comparison-table" class="md-nav__link">
    <span class="md-ellipsis">
      Format Comparison Table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#target-audience" class="md-nav__link">
    <span class="md-ellipsis">
      Target Audience
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-quick-introduction-to-clf" class="md-nav__link">
    <span class="md-ellipsis">
      A Quick Introduction to CLF
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-source-example-implemention" class="md-nav__link">
    <span class="md-ellipsis">
      Open Source Example Implemention
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Open Source Example Implemention">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ociochecklut" class="md-nav__link">
    <span class="md-ellipsis">
      ociochecklut
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ocioconvert" class="md-nav__link">
    <span class="md-ellipsis">
      ocioconvert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ociomakeclf" class="md-nav__link">
    <span class="md-ellipsis">
      ociomakeclf
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minimum-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Minimum Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Minimum Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction_1" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finishing-tier" class="md-nav__link">
    <span class="md-ellipsis">
      Finishing Tier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-tier" class="md-nav__link">
    <span class="md-ellipsis">
      Preview Tier
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reading-clfs" class="md-nav__link">
    <span class="md-ellipsis">
      Reading CLFs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reading CLFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-parsing-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      General Parsing Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clf-file-test-suite" class="md-nav__link">
    <span class="md-ellipsis">
      CLF File Test Suite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-procedure" class="md-nav__link">
    <span class="md-ellipsis">
      Test Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applying" class="md-nav__link">
    <span class="md-ellipsis">
      Applying CLFs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Applying CLFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    <span class="md-ellipsis">
      General
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finishing-tier_1" class="md-nav__link">
    <span class="md-ellipsis">
      Finishing Tier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-tier_1" class="md-nav__link">
    <span class="md-ellipsis">
      Preview Tier
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing" class="md-nav__link">
    <span class="md-ellipsis">
      Writing CLFs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing CLFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-extension" class="md-nav__link">
    <span class="md-ellipsis">
      File Extension
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indentation" class="md-nav__link">
    <span class="md-ellipsis">
      Indentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-of-xml-comments" class="md-nav__link">
    <span class="md-ellipsis">
      Use of XML Comments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discrete-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Discrete Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#precision-and-range-of-numeric-values" class="md-nav__link">
    <span class="md-ellipsis">
      Precision and Range of Numeric Values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-id-attribute" class="md-nav__link">
    <span class="md-ellipsis">
      The id Attribute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-of-proprietary-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Storage of Proprietary Metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-metadata-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Other Metadata Considerations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helpful-hints-for-a-successful-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Helpful Hints for a Successful Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Helpful Hints for a Successful Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matrix-order" class="md-nav__link">
    <span class="md-ellipsis">
      Matrix Order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lut3d-serialization-order" class="md-nav__link">
    <span class="md-ellipsis">
      LUT3D Serialization Order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gamma-polarity" class="md-nav__link">
    <span class="md-ellipsis">
      Gamma Polarity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-depth-attributes-dont-affect-processing-precision" class="md-nav__link">
    <span class="md-ellipsis">
      Bit-Depth Attributes Don't Affect Processing Precision
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conversion-between-bit-depths" class="md-nav__link">
    <span class="md-ellipsis">
      Conversion Between Bit-Depths
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendices" class="md-nav__link">
    <span class="md-ellipsis">
      Appendices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#annexA" class="md-nav__link">
    <span class="md-ellipsis">
      Annex A: Test Image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexB" class="md-nav__link">
    <span class="md-ellipsis">
      Annex B: CLF Test Suite Listing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexC" class="md-nav__link">
    <span class="md-ellipsis">
      Annex C: Finishing Tier Apply Test CLF List
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexD" class="md-nav__link">
    <span class="md-ellipsis">
      Annex D: Preview Tier Apply Test CLF List
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexE" class="md-nav__link">
    <span class="md-ellipsis">
      Annex E: Baking a CLF for Preview Tier Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexF" class="md-nav__link">
    <span class="md-ellipsis">
      Annex F: Using CLF to represent ACES Look Transforms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexG" class="md-nav__link">
    <span class="md-ellipsis">
      Annex G: Using CLF with AMF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexH" class="md-nav__link">
    <span class="md-ellipsis">
      Annex H: Identity (no-op) CLF example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexI" class="md-nav__link">
    <span class="md-ellipsis">
      Annex I: Infinity and NaN handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexJ" class="md-nav__link">
    <span class="md-ellipsis">
      Annex J: Python code for creating the Preview Tier test LUT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annexK" class="md-nav__link">
    <span class="md-ellipsis">
      Annex K: Generation of the reference images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<!-- SPDX-License-Identifier: CC-BY-4.0 -->
<!-- Copyright Contributors to the ACES Documentation -->

<h1 id="common-lut-format-clf-implementation-guide">Common <abbr title="look-up table">LUT</abbr> Format (<abbr title="Common LUT Format">CLF</abbr>) Implementation Guide<a class="headerlink" href="#common-lut-format-clf-implementation-guide" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Look-up tables, or <abbr title="look-up tables">LUTs</abbr>, are a common method for communicating color transformations. Many software and hardware providers develop <abbr title="look-up table">LUT</abbr> formats uniquely designed for use in their systems. Since these formats were designed to work in specific use cases, they often prove inadequate for interchangeability between applications or systems. To further complicate matters, some <abbr title="look-up table">LUT</abbr> formats use the same file extensions which make them appear to be compatible when they are not. If there are already a dozen or more confusing <abbr title="look-up table">LUT</abbr> formats, why should you as a developer consider adding support for yet another one?</p>
<p>While the myriad <abbr title="look-up table">LUT</abbr> formats already available are fundamentally useful in theory, each lacks one or more features that can be critical in meeting the demands of today’s sophisticated workflows. Existing formats can lack the quality, versatility, and metadata required to meet the demands of modern systems. </p>
<p>The Common <abbr title="look-up table">LUT</abbr> Format (<abbr title="Common LUT Format">CLF</abbr>) provides flexibility to enclose transforms from simple to complex. Due to a lack of interchangeability of color transforms between tools, <abbr title="look-up tables">LUTs</abbr> are frequently abused as a catch-all. Even simple color-space transformations, such as the application of a matrix or a logarithmic shaper function are often “baked” to crude <abbr title="look-up table">LUT</abbr> formats resulting in unfortunate losses in precision. As a solution, <abbr title="Common LUT Format">CLF</abbr> allows for a range of common mathematical operators to be specified precisely, in addition to supporting traditional 1D- and 3D-<abbr title="look-up tables">LUTs</abbr> in the file. </p>
<p>Because <abbr title="Common LUT Format">CLF</abbr> files are floating-point capable, extremely flexible, and well documented, they are an excellent candidate for use in modern workflows. CLFs are also ideal for archival purposes because the format is well-specified and documented. There is also a high-quality, open source implementation freely available on GitHub.</p>
<h3 id="format-comparison-table">Format Comparison Table<a class="headerlink" href="#format-comparison-table" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><strong>Features/Formats</strong></th>
<th style="text-align: center;"><abbr title="Common LUT Format">CLF</abbr></th>
<th style="text-align: center;">3dl</th>
<th style="text-align: center;">Adobe (Iridas) cube</th>
<th style="text-align: center;">Resolve cube</th>
<th style="text-align: center;">Truelight cube</th>
<th style="text-align: center;">Cinespace cube</th>
<th style="text-align: center;"><abbr title="American Society of Cinematographers">ASC</abbr> <abbr title="Color Decision List">CDL</abbr></th>
<th style="text-align: center;">Imageworks spi3d</th>
<th style="text-align: center;">ICC Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td>Provider</td>
<td style="text-align: center;">Academy / <abbr title="American Society of Cinematographers">ASC</abbr></td>
<td style="text-align: center;">Discreet</td>
<td style="text-align: center;">Adobe</td>
<td style="text-align: center;">Blackmagic</td>
<td style="text-align: center;">Filmlight</td>
<td style="text-align: center;">Rising Sun</td>
<td style="text-align: center;"><abbr title="American Society of Cinematographers">ASC</abbr></td>
<td style="text-align: center;">Imageworks</td>
<td style="text-align: center;">ICC</td>
</tr>
<tr>
<td>Maintained public documentation</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
</tr>
<tr>
<td>Implementation guide</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
</tr>
<tr>
<td>Allows shaper <abbr title="look-up table">LUT</abbr></td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
</tr>
<tr>
<td>Is not limited to log or video data on input</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
</tr>
<tr>
<td>Unconstrained ordering of processing elements</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
</tr>
<tr>
<td>Floating-point table values</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
</tr>
<tr>
<td>Rich metadata</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
</tr>
<tr>
<td>Test suite provided</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
</tr>
<tr>
<td>Text-based</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
</tr>
<tr>
<td>Can define operations in linear floating-point space</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
</tr>
<tr>
<td><abbr title="Globally Unique Identifier">GUID</abbr> support</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">✅</td>
</tr>
<tr>
<td>Supports mathematical operators</td>
<td style="text-align: center;">✅</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
<td style="text-align: center;">❌</td>
</tr>
</tbody>
</table>
<h2 id="target-audience">Target Audience<a class="headerlink" href="#target-audience" title="Permanent link">&para;</a></h2>
<p>This document is primarily intended for application developers who want to add <abbr title="Common LUT Format">CLF</abbr> support to their product. It defines requirements, tests, and provides recommendations that, if followed, will lead to robust support for <abbr title="Common LUT Format">CLF</abbr>. Implementers who follow the guidance in this document can have confidence that their product is implementing the specification correctly.</p>
<p>The document may also be of interest to those using <abbr title="Common LUT Format">CLF</abbr> to author transforms and who want to understand how the CLFs will be used by applications.</p>
<p>This guide should be read in conjunction with the <a href="../specification/"><abbr title="Common LUT Format">CLF</abbr> Specification (v 3.0)</a>. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The specification was previously referred to by its document number - "S-2014-006". Although the spec had "2014" in the name, the document has been updated more recently than that. Version 3 of <abbr title="Common LUT Format">CLF</abbr> was introduced with the release of <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> 1.2 in 2020 and the most recent editorial updates were in 2021. The current version of the specification now lives at the above link.</p>
</div>
<h2 id="a-quick-introduction-to-clf">A Quick Introduction to <abbr title="Common LUT Format">CLF</abbr><a class="headerlink" href="#a-quick-introduction-to-clf" title="Permanent link">&para;</a></h2>
<p>Below is a basic example of a simple <abbr title="Common LUT Format">CLF</abbr> file. Despite the word '<abbr title="look-up table">LUT</abbr>' in the name of the format, these very simple examples do not contain any type of <abbr title="look-up table">LUT</abbr> whatsoever. Instead, the <abbr title="Common LUT Format">CLF</abbr> is being used to communicate a set of <abbr title="American Society of Cinematographers">ASC</abbr> <abbr title="Color Decision List">CDL</abbr> adjustments (<a href="#example-1">Example 1</a>), and encapsulate a YCbCr to <abbr title="Red, Green, and Blue">RGB</abbr> conversion (<a href="#example-2">Example 2</a>).</p>
<p>There are a few key points that these examples demonstrate:</p>
<ul>
<li><abbr title="Common LUT Format">CLF</abbr> is an <abbr title="Extensible Markup Language">XML</abbr> document and therefore conforms to the requirements of any <abbr title="Extensible Markup Language">XML</abbr> document.</li>
<li>There is one <code>ProcessList</code>, which can contain any number of <code>ProcessNodes</code>. (A <code>ProcessNode</code> is an operator such as a <code>Matrix</code> or <code>LUT3D</code>.)</li>
<li>A <abbr title="Common LUT Format">CLF</abbr> may or may not contain “<abbr title="look-up tables">LUTs</abbr>” (despite the name).</li>
<li>Some parts are optional and others are required.</li>
<li><abbr title="Common LUT Format">CLF</abbr> provides a richer metadata model than other <abbr title="look-up table">LUT</abbr> formats - it’s not just numbers. Good metadata is highly encouraged and helps make the <abbr title="Common LUT Format">CLF</abbr> file self-documenting.</li>
<li>Every <abbr title="Common LUT Format">CLF</abbr> must have a unique <code>id</code> attribute.</li>
<li>The bit-depth attributes control formatting but not precision.</li>
</ul>
<p>Color coding for the following two examples: <br>
<span style="color:red">red</span> is required <br>
<span style="color:blue">blue</span> is optional <br>
<span style="color:green">green</span> are comments</p>
<h4 id="example-1">Example 1:<a class="headerlink" href="#example-1" title="Permanent link">&para;</a></h4>
<div class="highlight">
<span class="filename">ASC CDL Implementation</span>
<pre>
<code>&lt;<span style="color:red">?xml version="1.0" encoding="UTF-8"?</span>&gt;
<span style="color:green">&lt;!-- Required: XML Version and Encoding declaration --&gt;</span>

<span style="color:green">&lt;!-- Required: ProcessList element with ‘id’ and ‘compCLFversion’ --&gt;</span>
<span style="color:green">&lt;!-- name and xmlns are optional --&gt;</span>
&lt;<span style="color:red">ProcessList</span>
  <span style="color:red">compCLFversion</span>="3.0" 
  <span style="color:red">id</span>="b4cca59a-9428-49c0-8e91-868718c4e526" 
  <span style="color:blue">name</span>="FwdNoClamp style" 
  <span style="color:blue">xmlns</span>="urn:AMPAS:CLF:v3.0"&gt;

  &lt;<span style="color:blue">Description</span>&gt;CDL with FwdNoClamp style&lt;/<span style="color:blue">Description</span>&gt;

  &lt;<span style="color:blue">ASC_CDL </span>
    <span style="color:blue">id</span>="clf/ctf no-clamp fwd" 
    <span style="color:red">inBitDepth</span>="10i" 
    <span style="color:red">outBitDepth</span>="8i" 
    <span style="color:red">style</span>="FwdNoClamp"&gt;

    &lt;<span style="color:blue">SOPNode</span>&gt;
      &lt;<span style="color:red">Slope</span>&gt;  1.000000  1.000000  0.800000&lt;/<span style="color:red">Slope</span>&gt;
      &lt;<span style="color:red">Offset</span>&gt;-0.020000  0.000000  0.150000&lt;/<span style="color:red">Offset</span>&gt;
      &lt;<span style="color:red">Power</span>&gt;  1.050000  1.150000  1.400000&lt;/<span style="color:red">Power</span>&gt;
    &lt;/<span style="color:blue">SOPNode</span>&gt;

    &lt;<span style="color:blue">SatNode</span>&gt;
      &lt;<span style="color:red">Saturation</span>&gt;0.750000&lt;/<span style="color:red">Saturation</span>&gt;
    &lt;/<span style="color:blue">SatNode</span>&gt;
  &lt;/<span style="color:blue">ASC_CDL</span>&gt;
&lt;/<span style="color:red">ProcessList</span>&gt;
</code>
</pre>
</div>

<h4 id="example-2">Example 2:<a class="headerlink" href="#example-2" title="Permanent link">&para;</a></h4>
<div class="highlight">
<span class="filename">BT.709 YCbCr (SMPTE/legal range) to RGB (full range)</span>
<pre>
<code><span style="color:red">&lt;?xml version="1.0" encoding="UTF-8"?</span>&gt;
<span style="color:green">&lt;!-- Line above is required: XML Version and Encoding declaration --&gt;

&lt;!-- Required: ProcessList element with ‘id’ and ‘compCLFversion’ --&gt;</span>
&lt;<span style="color:red">ProcessList</span>
  <span style="color:red">id</span>="0befc138-3757-45f0-a080-83bebb77baf2"
  <span style="color:red">compCLFversion</span>="3.0"&gt;

  <span style="color:green">&lt;!-- Optional: ProcessList Description --&gt;</span>
  &lt;<span style="color:blue">Description</span>&gt;BT.709 YCbCr (legal) to RGB (full)&lt;/<span style="color:blue">Description</span>&gt;

  <span style="color:green">&lt;!-- Optional: InputDescriptor / OutputDescriptor --&gt;</span>
  &lt;<span style="color:blue">InputDescriptor</span>&gt;YCbCr&lt;/<span style="color:blue">InputDescriptor</span>&gt;
  &lt;<span style="color:blue">OutputDescriptor</span>&gt;RGB&lt;/<span style="color:blue">OutputDescriptor</span>&gt;

  <span style="color:green">&lt;!-- Required: One or more ProcessNode elements --&gt;
  &lt;!-- inBitDepth and OutBitDepth are required, id is optional --&gt;
  &lt;!-- If in/outBitDepth values are different, the scale factor
    between them must also be applied to the matrix coefficients! --&gt;</span>
  &lt;<span style="color:blue">Matrix 
    id</span>="815ebbac-550a-453b-a1e6-bf93779fc9c8" 
    <span style="color:red">inBitDepth</span>="32f" 
    <span style="color:red">outBitDepth</span>="32f"&gt;

    <span style="color:green">&lt;!-- Optional: ProcessNode description --&gt;</span>
    &lt;<span style="color:blue">Description</span>&gt;Input offsets for legal range luma and color
      difference channels&lt;/<span style="color:blue">Description</span>&gt;

    <span style="color:green">&lt;!-- White space formatting is recommended, but optional --&gt;
    &lt;!-- Array element is required for a Matrix ProcessNode --&gt;</span>
    &lt;<span style="color:red">Array dim</span>="3 4"&gt;
      <span style="color:green">&lt;!-- when dim=”3 4”, the 4th column is offset terms --&gt;</span>
      1.0 0.0 0.0 -0.0625
      0.0 1.0 0.0 -0.5
      0.0 0.0 1.0 -0.5
    &lt;/<span style="color:red">Array</span>&gt;
  &lt;/<span style="color:blue">Matrix</span>&gt;

  <span style="color:green">&lt;!-- Additional ProcessNodes are applied in order --&gt;</span>
  &lt;<span style="color:blue">Matrix 
    id</span>="deceda6e-8fee-471a-8599-fa513c17f3cf"
    <span style="color:red">inBitDepth</span>="32f" 
    <span style="color:red">outBitDepth</span>="32f"&gt;
    &lt;<span style="color:blue">Description</span>&gt;BT.709 YCbCr to RGB matrix&lt;/<span style="color:blue">Description</span>&gt;
    &lt;<span style="color:red">Array dim</span>="3 3"&gt;
      1.16893193493151  0.000000000000000  1.799743966238840
      1.16893193493151 -0.214081616673236 -0.534991005624129
      1.16893193493151  2.120653355189730 -0.000000000000000
    &lt;/<span style="color:red">Array</span>&gt;
  &lt;/<span style="color:blue">Matrix</span>&gt;
&lt;/<span style="color:red">ProcessList</span>&gt;

</code>
</pre>
</div>

<h2 id="open-source-example-implemention">Open Source Example Implemention<a class="headerlink" href="#open-source-example-implemention" title="Permanent link">&para;</a></h2>
<p>As you explore <abbr title="Common LUT Format">CLF</abbr> and work to implement it into your product(s), it may be helpful to refer to some existing tools that already provide full <abbr title="Common LUT Format">CLF</abbr> functionality. The tools described here are included in the open source project OpenColorIO (<abbr title="OpenColorIO">OCIO</abbr>) v2. More details and the full installation process for <abbr title="OpenColorIO">OCIO</abbr> can be found at <a href="https://www.opencolorio.org">https://www.opencolorio.org</a>.</p>
<h3 id="ociochecklut"><code>ociochecklut</code><a class="headerlink" href="#ociochecklut" title="Permanent link">&para;</a></h3>
<p>The command-line utility <code>ociochecklut</code> can be used to load a <abbr title="Common LUT Format">CLF</abbr> file and process an <abbr title="Red, Green, and Blue">RGB</abbr> triplet through the <abbr title="Common LUT Format">CLF</abbr> file. It will report any errors that are encountered in parsing the file. If no <abbr title="Red, Green, and Blue">RGB</abbr> triplet is provided to process through the <abbr title="Common LUT Format">CLF</abbr> file, then a list of the <code>ProcessNodes</code> contained in the <abbr title="look-up table">LUT</abbr> are returned. This tool is installed as part of <abbr title="OpenColorIO">OCIO</abbr> v2.</p>
<p>Here is sample output using the <abbr title="Common LUT Format">CLF</abbr> in the example section (assuming it is saved as a file called <code>709_ycbcr-to-rgb.clf</code>):</p>
<p>Summarizing the contents of the <abbr title="Common LUT Format">CLF</abbr>:
<div class="highlight"><pre><span></span><code>$ ociochecklut 709_ycbcr-to-rgb.clf
Transform operators: 
    &lt;MatrixTransform direction=forward, fileindepth=32f, fileoutdepth=32f, matrix=1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1, offset=-0.0625 -0.5 -0.5 0&gt;
    &lt;MatrixTransform direction=forward, fileindepth=32f, fileoutdepth=32f, matrix=1.16893193493151 0 1.79974396623884 0 1.16893193493151 -0.214081616673236 -0.534991005624129 0 1.16893193493151 2.12065335518973 -0 0 0 0 0 1, offset=0 0 0 0&gt;
</code></pre></div></p>
<p>Evaluating the <abbr title="Red, Green, and Blue">RGB</abbr> value [0.5, 0.4, 0.3]:
<div class="highlight"><pre><span></span><code>$ ociochecklut 709_ycbcr-to-rgb.clf 0.5 0.4 0.3
0.1514589 0.6398141 0.2993424
</code></pre></div></p>
<h3 id="ocioconvert"><code>ocioconvert</code><a class="headerlink" href="#ocioconvert" title="Permanent link">&para;</a></h3>
<p>The command-line utility <code>ocioconvert</code> can be used to apply a <abbr title="Common LUT Format">CLF</abbr> file to an image. To apply a <abbr title="Common LUT Format">CLF</abbr> file, use the <code>--lut</code> option. A variety of image file formats are supported. This tool is installed as a part of <abbr title="OpenColorIO">OCIO</abbr> v2, although it first requires installation of OpenImageIO.</p>
<p>Processing the input image <code>syntheticChart.01.exr</code> to the output image <code>output_image.exr</code> through the <abbr title="Common LUT Format">CLF</abbr> from the previous example:
<div class="highlight"><pre><span></span><code>$ ocioconvert --lut 709_ycbcr-to-rgb.clf syntheticChart.01.exr output_image.exr
</code></pre></div></p>
<h3 id="ociomakeclf"><code>ociomakeclf</code><a class="headerlink" href="#ociomakeclf" title="Permanent link">&para;</a></h3>
<p>The command-line utility <code>ociomakeclf</code> will convert any <abbr title="look-up table">LUT</abbr> format supported by OpenColorIO into <abbr title="Common LUT Format">CLF</abbr> format. The <code>--csc</code> option may be used to create an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transform that is compatible with the <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Metadata File (<abbr title="ACES Metadata File">AMF</abbr>). This tool is installed as a part of <abbr title="OpenColorIO">OCIO</abbr> v2.</p>
<p>Convert the <abbr title="look-up table">LUT</abbr> oldLUT.3dl to <abbr title="Common LUT Format">CLF</abbr> format:
<div class="highlight"><pre><span></span><code>$ ociomakeclf oldLUT.3dl oldLUT.clf
</code></pre></div></p>
<p>Convert the look <abbr title="look-up table">LUT</abbr> acescctLUT.3dl that expects and produces ACEScct values to an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transform in <abbr title="Common LUT Format">CLF</abbr> format that expects and produces ACES2065-1 values:
<div class="highlight"><pre><span></span><code>$ ociomakeclf acescctLUT.3dl LMT.clf --csc ACEScct
</code></pre></div></p>
<h2 id="minimum-requirements">Minimum Requirements<a class="headerlink" href="#minimum-requirements" title="Permanent link">&para;</a></h2>
<h3 id="introduction_1">Introduction<a class="headerlink" href="#introduction_1" title="Permanent link">&para;</a></h3>
<p>The products anticipated to implement <abbr title="Common LUT Format">CLF</abbr> can be categorized into two broad categories: one for final production-level finished images and one for preview/proxy images. Due to the fundamental differences in the products, different requirements are provided for the two categories.</p>
<h3 id="finishing-tier">Finishing Tier<a class="headerlink" href="#finishing-tier" title="Permanent link">&para;</a></h3>
<p>The primary category of products, dubbed the <em>Finishing Tier</em>, includes software implementations that have the logic and processing power available to parse and apply <code>ProcessNode</code> operations using floating-point calculations and in sequential order. Finishing Tier products provide the highest quality image processing and have the tightest tolerances, prioritizing accuracy in computation results. Finishing Tier products should be used to create images when the highest image fidelity is required in pipelines utilizing <abbr title="Common LUT Format">CLF</abbr> files.</p>
<h4 id="minimum-requirements_1">Minimum Requirements<a class="headerlink" href="#minimum-requirements_1" title="Permanent link">&para;</a></h4>
<p>Products in the Finishing Tier category shall:</p>
<ol>
<li>Pass all the Read Tests</li>
<li>Pass the Finishing Tier Apply Tests</li>
</ol>
<p>In addition to the minimum requirements, Finishing Tier products should review the "<a href="#writing"><strong>Writing CLFs</strong></a>" section and conform their <abbr title="Common LUT Format">CLF</abbr> implementation to those recommendations wherever possible.</p>
<h3 id="preview-tier">Preview Tier<a class="headerlink" href="#preview-tier" title="Permanent link">&para;</a></h3>
<p>The second category of implementations are described as <em>Preview Tier</em> devices. These are products that, due to limited processing power or technical constraints, cannot implement a <abbr title="Common LUT Format">CLF</abbr> <code>ProcessList</code> exactly and instead require that <abbr title="Common LUT Format">CLF</abbr> files be ”baked” or collapsed into a simpler representation (for example, a single 3D-<abbr title="look-up table">LUT</abbr>). Hardware devices such as on-set <abbr title="look-up table">LUT</abbr> boxes would be an example of devices that might fall into this category. </p>
<p>As the name implies, Preview Tier products are suitable for creating images such as for on-set viewing, where the requirements for accuracy and/or flexibility are lower than for the Finishing Tier.</p>
<p><abbr title="Common LUT Format">CLF</abbr> is designed as a modern <abbr title="look-up table">LUT</abbr> format that can handle floating-point input and output pixels. However, the current ecosystem of devices still includes many products that work primarily on integer-encoded signals (e.g. HD-<abbr title="Serial Digital Interface">SDI</abbr> and HDMI video) and do not support floating-point image data, including scene-linear encodings such as ACES2065-1. These types of devices would fall in the Preview Tier and <abbr title="Common LUT Format">CLF</abbr> may be used to encapsulate any of the <abbr title="look-up tables">LUTs</abbr> that are currently used in such devices. But there is no expectation that these devices will be able to accurately process other CLFs that contain transforms expecting scene-linear inputs or outputs.</p>
<p>Note that although the processing requirements are lower for the Preview Tier, the read requirements are not. In other words, even Preview Tier devices must be able to read all of the files in the test suite. But as described in the section "<a href="#applying"><strong>Applying CLFs</strong></a>", if a Preview Tier device detects <code>ProcessNodes</code> that it does not support, there are two options:</p>
<ol>
<li>Inform the user of this situation and do not attempt to process the file.</li>
<li>Attempt to bake the <abbr title="Common LUT Format">CLF</abbr> down into a representation supported by the device. The user should be given some indication that they are seeing an approximation of the original <abbr title="Common LUT Format">CLF</abbr>.</li>
</ol>
<h4 id="minimum-requirements_2">Minimum Requirements<a class="headerlink" href="#minimum-requirements_2" title="Permanent link">&para;</a></h4>
<p>Products in the Preview Tier category shall:</p>
<ol>
<li>Pass all the Read Tests</li>
<li>Pass the Preview Tier Apply test</li>
</ol>
<h2 id="reading-clfs">Reading CLFs<a class="headerlink" href="#reading-clfs" title="Permanent link">&para;</a></h2>
<p>This section describes the general requirements for parsing <abbr title="Common LUT Format">CLF</abbr> files, the provided test suite, and the steps for validating an implementation using the test suite.</p>
<h3 id="general-parsing-requirements">General Parsing Requirements<a class="headerlink" href="#general-parsing-requirements" title="Permanent link">&para;</a></h3>
<h4 id="requirements">Requirements:<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p><strong>Version Support</strong></p>
<p>Implementations are expected to support v3 of the <a href="../specification/"><abbr title="Common LUT Format">CLF</abbr> Specification</a>. Backwards compatibility for versions prior to v3 is optional.</p>
</li>
<li>
<p><strong>Error Handling</strong></p>
<p>An implementation must check that a file is valid, and if not, issue an error or warning to the user hinting at what the problem is. The tool <code>ociochecklut</code> (<a href="#ociochecklut">described above</a>) provides good examples of the types of errors that could be issued when illegal syntax is detected.</p>
</li>
<li>
<p><strong>Metadata reading</strong></p>
<p>An implementation must (at a minimum) be able to display to the user the contents of these key metadata fields:</p>
<ol>
<li>Top-level ProcessList <code>Description</code> elements</li>
<li><code>InputDescriptor</code>, <code>OutputDescriptor</code></li>
</ol>
</li>
<li>
<p><strong>Precision and formatting of numeric values</strong></p>
<p>Implementations must be able to read at least 32-bit float precision, though 64-bit precision is desirable for ProcessNodes other than <code>LUT1D</code> and <code>LUT3D</code>. Note that the <abbr title="Common LUT Format">CLF</abbr> specification defines the numeric values as “xs:float” type, that is, <abbr title="Extensible Markup Language">XML</abbr> Schema floats. Parsers should be able to handle all of the details of this format (e.g., integers without a decimal point, missing leading 0 on decimal values, the presence of a leading “+”, etc.). Note that an integer is a legal xs:float.</p>
</li>
</ol>
<h4 id="recommendations">Recommendations<a class="headerlink" href="#recommendations" title="Permanent link">&para;</a></h4>
<p><abbr title="Extensible Markup Language">XML</abbr> is designed to be extensible, and <abbr title="Extensible Markup Language">XML</abbr> files often contain data that was not defined in the specification. However, the desire for extensibility must be balanced against the need to detect erroneous content. On occasion, unrecognized <abbr title="Extensible Markup Language">XML</abbr> elements may be detected. In those instances, the following logic is recommended:</p>
<ul>
<li>If the unrecognized element is at the <code>ProcessNode</code> level (in other words, the top level of the <code>ProcessList</code>), it should produce an error, or at least a warning.</li>
<li>If the unrecognized element is within a <code>ProcessNode</code>, a warning should be issued.</li>
<li>If the unrecognized element is within the <code>Info</code> block, it may be ignored.</li>
</ul>
<h3 id="clf-file-test-suite"><abbr title="Common LUT Format">CLF</abbr> File Test Suite<a class="headerlink" href="#clf-file-test-suite" title="Permanent link">&para;</a></h3>
<p>A number of test files are provided for implementers to test their system and demonstrate that their implementation can robustly handle all features of <abbr title="Common LUT Format">CLF</abbr> v3. The tests provided in the <a href="https://github.com/AcademySoftwareFoundation/OpenColorIO/tree/master/tests/data/files/clf"><strong>OpenColorIO repository on Github</strong></a> include both legal and illegal test files. The file name and description in each file identifies what the file is testing.</p>
<p>The test files confirm that each <code>ProcessNode</code> is functioning per the <abbr title="Common LUT Format">CLF</abbr> specification. For <code>ProcessNodes</code> that allow for different styles or parameters, either separate test files or single test files with multiple <code>ProcessNode</code> variations are provided to check that all styles and parameters are functional. Standard files are expected to be processed without error. </p>
<p>A number of "illegal" test files with various syntax errors are also provided to test the error handling capability of implementations. Illegal files should not be processed and the system should generate an appropriate error message.</p>
<h3 id="test-procedure">Test Procedure<a class="headerlink" href="#test-procedure" title="Permanent link">&para;</a></h3>
<p>Download the OpenColorIO repository from GitHub at the URL:
<a href="https://github.com/AcademySoftwareFoundation/OpenColorIO">https://github.com/AcademySoftwareFoundation/OpenColorIO</a></p>
<p>If you are not familiar with Git, that’s fine. Simply click on the green button that says Code and select “Download ZIP”. Unzip this file on your computer and you will have all of the test files. </p>
<p>The test files are in the directory:
<code>OpenColorIO/tests/data/files/clf</code></p>
<p>You may refer to a description of each test file in <a href="">Annex B</a>.</p>
<p>For each legal test file:</p>
<ol>
<li>Read the file into your product and verify that it loads successfully.</li>
</ol>
<p>For each illegal test file (these are the files in the <code>clf/illegal</code> subdirectory):</p>
<ol>
<li>Read the file into your product and ensure that the user is notified that it is not a legal <abbr title="Common LUT Format">CLF</abbr> file. Ideally, the nature of the problem should be communicated to the user.</li>
<li>Verify that none of these files load successfully. They should not result in a processed image. If an implementation needs to pass through the unprocessed image, it should communicate clearly to the user in some other way that there was an error.</li>
</ol>
<h2 id="applying">Applying CLFs<a class="headerlink" href="#applying" title="Permanent link">&para;</a></h2>
<h3 id="general">General<a class="headerlink" href="#general" title="Permanent link">&para;</a></h3>
<p>For <abbr title="Common LUT Format">CLF</abbr> to be useful, it is important that different products output the same results when applying the same <abbr title="Common LUT Format">CLF</abbr> to the same input. This section describes the different expectations for Finishing Tier and Preview Tier products. Each category has their own metric and defined tolerances.</p>
<h3 id="finishing-tier_1">Finishing Tier<a class="headerlink" href="#finishing-tier_1" title="Permanent link">&para;</a></h3>
<h4 id="tolerances">Tolerances<a class="headerlink" href="#tolerances" title="Permanent link">&para;</a></h4>
<p>The Finishing Tier is intended to cover software-based implementations such as products for tasks including color correction and compositing. It is expected that these implementations will use floating-point math to apply the contents of the <abbr title="Common LUT Format">CLF</abbr>, without converting it into a significantly different representation. Hence fairly tight tolerances may be expected.</p>
<p>A <abbr title="Common LUT Format">CLF</abbr> may be used to apply arbitrary color space conversions and so the input and output images may be in arbitrary color spaces, including video, logarithmic, and scene-linear color encodings. Both integer and wide-range floating-point pixel values are expected. Video and logarithmic encodings are typically sufficiently perceptually uniform that a simple absolute error metric such as <code>(actual – aim)</code> may be used. However, scene-linear encodings require a tolerance that is tighter for dark colors and looser for bright colors - in other words, a relative rather than absolute metric. This is due to the approximately logarithmic nature of human color perception (although the metric is actually computed per channel).</p>
<p>When comparing an aim and actual value, a basic relative error metric has the form: </p>
<p><code>(actual – aim) / aim</code></p>
<p>However this can become overly sensitive when the values being compared become very small. In the limit, when the aim value is zero, the result is either infinity or NaN. Therefore it is useful to use a “safe-guarded relative error metric” that places a lower bound on the denominator:<br />
<code>actual – aim) / max(aim, lower_bound)</code>. </p>
<p>This effectively transitions the error metric from being a relative error metric for bright and normal colors to an absolute error metric when approaching a certain noise floor determined by the <code>lower_bound</code> constant. A reasonable <code>lower_bound</code> constant for images in ACES2065-1 color space would be 0.1. It is also necessary to handle the case where the aim value may be negative, in which case the final error metric becomes: </p>
<p><code>abs(actual – aim) / max(abs(aim), 0.1) &lt;= 0.002</code></p>
<p>This is essentially a relative tolerance of +/– one part in 500 above 0.1 and an absolute tolerance of +/– 0.0002 below 0.1.</p>
<p>It is expected that implementations in the Finishing Tier will be using floating-point software calculations and the processing will be applied this way regardless of whether the color encodings involved are video, logarithmic, or scene-linear. Since relative tolerances are well-suited to verifying floating-point math, the safe-guarded relative error metric will be used for all Finishing Tier tolerances even though this may be perceptually either too tight or too loose when processing video or logarithmic pixel values.</p>
<p>Above the lower bound transition, the tolerance for implementations in the Finishing Tier is a relative error of plus or minus one part in 500. For comparison, half-float numbers are spaced at a relative distance of one part in 1024. (In the literature on the subject of floating-point math, this distance is called a “unit of least precision,” or ULP.) So the tolerance for the metric is only slightly more loose than the precision imposed by the storage of images as half-float OpenEXR files.</p>
<p>To validate the tolerance, testing was conducted using various processing modes in OpenColorIO. For example, various forms of CPU optimization were applied and the results were compared to the unoptimized reference version. These included optimizations such as concatenating adjacent matrices and approximating standard library logarithm and power functions with faster but less precise versions. Likewise, processing on the GPU was compared to the CPU reference version. The test image that was used is the one described in Annex A, so it sampled the full range of half-float numbers. The fact that all of these processing variations passed the specified error tolerance indicates that it should be an achievable performance level for a wide range of products.</p>
<h4 id="test-procedure_1">Test Procedure<a class="headerlink" href="#test-procedure_1" title="Permanent link">&para;</a></h4>
<p>The collection of test <abbr title="Common LUT Format">CLF</abbr> files are included in the OpenColorIO repository, as described in <a href="#annexB">Annex B</a>. Process the source image (whose contents are described in <a href="#annexA">Annex A</a>) through your implementation for each of the CLFs described in <a href="#annexC">Annex C</a>.</p>
<p>The processed reference frames to be used for comparison may be downloaded as described in <a href="#annexC">Annex C</a>, or you may generate them yourself using the steps described in <a href="#annexK">Annex K</a></p>
<p>The command-line application <code>oiiotool</code>, which is installed as a component of OpenImageIO, can be used to compare pixels between two images and evaluate the metric specified in this section. A Python script for doing this is provided with OpenColorIO. Here are the steps for how to install and run it:</p>
<ol>
<li>Install OpenImageIO.</li>
<li>
<p>Download the OpenColorIO source code from the URL: 
    <a href="https://github.com/AcademySoftwareFoundation/OpenColorIO">https://github.com/AcademySoftwareFoundation/OpenColorIO</a></p>
</li>
<li>
<p>Unzip the downloaded source code package. </p>
</li>
<li>In a shell, <code>cd</code> to the directory where the OpenColorIO source code was unzipped, and then <code>cd</code> into the sub-directory <code>share/clf</code>. This directory contains the Python script.</li>
<li>
<p>In the shell, type:</p>
<p><code>$ python compare_clf_test_frames.py &lt;PATH-TO-REFERENCE-IMAGES&gt; &lt;PATH-TO-ACTUAL-IMAGES&gt;</code></p>
<p>replacing the two items in brackets with the path to the downloaded reference images and the path to your implementation's actual images. </p>
</li>
</ol>
<p>The script iterates over the images in the directory and prints the oiiotool command being run. It will then print either 'Test passed' or 'Test failed' after each command and then at the end will summarize with 'All tests passed' or 'These tests failed' with a list of the failed images.</p>
<h4 id="alternate-test-procedure">Alternate Test Procedure<a class="headerlink" href="#alternate-test-procedure" title="Permanent link">&para;</a></h4>
<p>Implementers may also choose to use other tools or implement their own tools to compare pixel values and calculate the metrics. In that case, proceed as follows to compare your actual images to the aim reference images described in <a href="#annexC">Annex C</a>:</p>
<p>For each <abbr title="Common LUT Format">CLF</abbr> identified in the Finishing Tier test list in <a href="#annexC">Annex C</a>:</p>
<ol>
<li>Use your implementation to process the test frame through each legal <abbr title="Common LUT Format">CLF</abbr> file.</li>
<li>Calculate the error metric:  <code>abs(actual – aim) / max(abs(aim), 0.1)</code></li>
<li>Verify that:<ol>
<li>max error &lt;= 0.002</li>
<li>no Infinity or NaN values are created</li>
</ol>
</li>
</ol>
<h3 id="preview-tier_1">Preview Tier<a class="headerlink" href="#preview-tier_1" title="Permanent link">&para;</a></h3>
<h4 id="lut-baking"><abbr title="look-up table">LUT</abbr> Baking<a class="headerlink" href="#lut-baking" title="Permanent link">&para;</a></h4>
<p>Preview Tier devices/implementations typically are not able to handle the full flexibility of the <abbr title="Common LUT Format">CLF</abbr> processing model. If the contents of the <abbr title="Common LUT Format">CLF</abbr> correspond to what the device may natively apply, then it is reasonable to expect fairly tight processing tolerances. However, if the <abbr title="Common LUT Format">CLF</abbr> contains many ops that must be converted (or "baked") into some other representation in order to be applied in device hardware, then it may be unreasonable to demand the same level of performance. </p>
<p>Different tolerances would need to be established for each <abbr title="Common LUT Format">CLF</abbr> in the test suite depending on the contents and complexity of each <abbr title="Common LUT Format">CLF</abbr> and on the details of how it is baked. Therefore, the current version of this guide only tests the ability to process a single <code>LUT3D</code> (e.g. a baked result, not the baking process itself).</p>
<p>So all Preview Tier devices must at least handle the <code>LUT3D</code> apply test but implementers will need to decide how to handle CLFs that are more complicated. One approach is to simply inform the user that the <abbr title="Common LUT Format">CLF</abbr> contains operators that cannot be processed by that implementation. Another approach is to attempt to bake the <abbr title="Common LUT Format">CLF</abbr> into a form that the implementation is able to process. <a href="#annexE">Annex E</a> provides an introduction to the topic of baking.</p>
<p>Implementations should notify users if their <abbr title="Common LUT Format">CLF</abbr> is being baked into a significantly different structure in order to be processed by the device. (Simple adjustments such as concatenating adjacent matrices into a single matrix do not fall into this category, but combining multiple operators into a single <code>LUT3D</code> certainly does.)</p>
<p>Implementers are strongly advised to document the <abbr title="Common LUT Format">CLF</abbr> structures that they are able to apply exactly, without need of baking. This would allow users to plan their processing accordingly in order to make best use of the device. Advanced users will be able to generate CLFs in order to obtain the best accuracy possible, given the restrictions.</p>
<h4 id="tolerances_1">Tolerances<a class="headerlink" href="#tolerances_1" title="Permanent link">&para;</a></h4>
<p>The Preview Tier is intended to cover devices such as on set <abbr title="look-up table">LUT</abbr> boxes that work on live <abbr title="Serial Digital Interface">SDI</abbr> video signals. These devices are intended to process video or logarithmic encodings and typically do not handle floating-point pixel values. Therefore, a simple absolute error metric may be used. Integer values should be normalized to [0,1] by dividing by the maximum integer value (e.g., 1023, 4095, 65535), yielding an absolute error metric applied to normalized values:</p>
<div class="arithmatex">\[
{\text{abs}(actual – aim) &lt;= 0.002}
\]</div>
<p>This is essentially a tolerance of +/– two 10-bit code values, if applied to a 10-bit signal, or equivalently +/– eight 12-bit code values, if applied to a 12-bit signal, etc.</p>
<h4 id="test-procedure_2">Test Procedure<a class="headerlink" href="#test-procedure_2" title="Permanent link">&para;</a></h4>
<p>The process of verification for the Preview Tier is to check for correct implementation of a <code>LUT3D</code> with tetrahedral interpolation using an integer test image.</p>
<p>For the <abbr title="Common LUT Format">CLF</abbr> identified in the Preview Tier test list in <a href="#annexD">Annex D</a>:</p>
<ol>
<li>Use your implementation to process the Preview Tier DPX source image (see <a href="#annexD">Annex D</a>) and produce an integer DPX result.</li>
<li>
<p>Compare your result to the DPX reference frame provided (see <a href="#annexD">Annex D</a>), and calculate the error metric described in the preceding paragraphs:</p>
<ol>
<li>
<p>If using OpenImageIO, the command would be:</p>
<div class="highlight"><pre><span></span><code>$ oiiotool &lt;aim-image&gt; &lt;actual-image&gt; --absdiff --rangecheck 0,0,0 .002,.002,.002 -o /tmp/tmp.dpx
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>This command will print something like this:</p>
<div class="highlight"><pre><span></span><code>0 &lt; 0,0,0
0 &gt; .002,.002,.002
1048576 within range
</code></pre></div>
<p>If the second line of the result indicates that there are 0 pixels greater than 0.002, then the test passed. </p>
<p>(Note that <code>oiiotool</code> works in normalized units, so 0.002 is actually equivalent to 0.002 x 1023 = 2.046 10-bit code values.)</p>
</li>
</ol>
<h2 id="writing">Writing CLFs<a class="headerlink" href="#writing" title="Permanent link">&para;</a></h2>
<p>Not all products must support writing CLFs, depending on the way they are used. If your product supports the writing of <abbr title="Common LUT Format">CLF</abbr> files, it must adhere to the <abbr title="Common LUT Format">CLF</abbr> specification. Some important highlights and recommendations for implementation default behavior, or for users authoring CLFs by hand, are described in the following sections.</p>
<h3 id="file-extension">File Extension<a class="headerlink" href="#file-extension" title="Permanent link">&para;</a></h3>
<p>The extension used for <abbr title="Common LUT Format">CLF</abbr> files should be a  <code>.clf</code>  at the end of the file name.</p>
<h3 id="indentation">Indentation<a class="headerlink" href="#indentation" title="Permanent link">&para;</a></h3>
<p><abbr title="Common LUT Format">CLF</abbr> files may be opened and read by users during troubleshooting, so readability is desirable. In particular, the following formatting is recommended for indentation: </p>
<ol>
<li>Use 2-4 spaces to indent relative to a parent item.</li>
<li>A new indented line should be used after the starting element tag for complex <abbr title="Extensible Markup Language">XML</abbr> types. For compactness, simple <abbr title="Extensible Markup Language">XML</abbr> types may be placed on a single line.</li>
<li>Arrays (contained in <code>Matrix</code>, <code>LUT1D</code>, <code>LUT3D</code>) should use line breaks to present data visually (e.g., by aligning columns of R, G, B). Large blocks of lines of numbers do not need to be indented since they are already visually distinct and there is no point adding spaces in front of thousands of lines (e.g., in the case of large <abbr title="look-up tables">LUTs</abbr>).</li>
<li>Long text strings (e.g. in a <code>Description</code> tag) should not contain embedded wrapping and indentation. It is better to let the application software determine where to wrap long lines of text in order to present them best in its own user interface.</li>
</ol>
<h4 id="indentation-example-using-made-up-element-names">Indentation example (using made-up element names):<a class="headerlink" href="#indentation-example-using-made-up-element-names" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>&lt;aTag&gt;
   &lt;simpleType&gt;This does not require a line break.&lt;/simpleType&gt;
   &lt;complexType&gt;
      &lt;simpleType&gt;This is a simpleType in a complexType.&lt;/simpleType&gt;
      &lt;simpleType&gt;Here&#39;s a long text line that shouldn&#39;t be wrapped in the CLF since the app will decide where to wrap it.&lt;/simpleType&gt;
   &lt;/complexType&gt;
   &lt;simpleTypeWithParam param=0.5 /&gt;
   &lt;Array dim=&quot;3 4&quot;&gt;
1.0  0.0  0.0  -0.3
0.0  1.0  0.0  -0.5
0.0  0.0  1.0  -0.5
   &lt;/Array&gt;
&lt;/aTag&gt;
</code></pre></div>
<h3 id="use-of-xml-comments">Use of <abbr title="Extensible Markup Language">XML</abbr> Comments<a class="headerlink" href="#use-of-xml-comments" title="Permanent link">&para;</a></h3>
<p><abbr title="Common LUT Format">CLF</abbr> authors should avoid using <abbr title="Extensible Markup Language">XML</abbr> comments to encapsulate metadata or important information. Most parsers ignore comments, so if a <abbr title="Common LUT Format">CLF</abbr> gets read and rewritten, comments that were previously there may go missing. Any important information should be enclosed in provided metadata <abbr title="Extensible Markup Language">XML</abbr> elements and attributes (e.g., the ProcessList's <code>Info</code> element). </p>
<h3 id="discrete-operations">Discrete Operations<a class="headerlink" href="#discrete-operations" title="Permanent link">&para;</a></h3>
<p>Finishing Tier products should, whenever possible, encapsulate discrete math operations with one or more <code>ProcessNodes</code> in a <code>ProcessList</code> rather than simply exporting a 1D- and/or 3D-<abbr title="look-up table">LUT</abbr>. For example, a common color space conversion should use discrete <code>Log</code> and <code>Matrix</code> nodes, where appropriate, rather than a single <code>LUT3D</code>.</p>
<h3 id="precision-and-range-of-numeric-values">Precision and Range of Numeric Values<a class="headerlink" href="#precision-and-range-of-numeric-values" title="Permanent link">&para;</a></h3>
<p>Ensure your implementation writes a sufficient number of digits. Even though image processing will typically be done at 32-bit floating-point precision, intermediate calculations (for example, combining matrices) may be done at higher precision.</p>
<p>Also, take note that the bit-depth attributes do not impose range or quantization limits. Hence you should not impose these limits unnecessarily. For example, for a LUT1D with an <code>outBitDepth</code> of <code>10i</code>, the normal range would be expected to be 0 to 1023. However, it is legal to exceed this range and also to use fractional values. Thus, values such as <code>[-10.5, 0.01, 1055.2]</code> could be legal values. Please refer to the <a href="../specification/#bit-depth">Implementation Notes on Bit Depth section of the <abbr title="Common LUT Format">CLF</abbr> specification</a> for more detail.</p>
<h3 id="the-id-attribute">The <code>id</code> Attribute<a class="headerlink" href="#the-id-attribute" title="Permanent link">&para;</a></h3>
<p>Every <abbr title="Common LUT Format">CLF</abbr> is required to have an <code>id</code> attribute at the <code>ProcessList</code> level. The specification does not impose any restrictions on the formatting of this attribute. However, it should be noted that an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Metadata File that references a <abbr title="Common LUT Format">CLF</abbr> file prefers that the <code>id</code> attribute contains a <abbr title="Universal(ly) Unique Identifier">UUID</abbr> object according to RFC 4122. Therefore, it is recommended that implementations use a <abbr title="Universal(ly) Unique Identifier">UUID</abbr> to fill the <code>id</code> attribute when writing new <abbr title="Common LUT Format">CLF</abbr> files. Note that the <code>id</code> attribute is optional at the <code>ProcessNode</code> level.</p>
<h3 id="storage-of-proprietary-metadata">Storage of Proprietary Metadata<a class="headerlink" href="#storage-of-proprietary-metadata" title="Permanent link">&para;</a></h3>
<p>If an application wants to store "dark metadata" that is meaningful only for a special purpose within proprietary products or workflows, this is easily accomplished. Indeed this is one of the frequently cited benefits of the <abbr title="Extensible Markup Language">XML</abbr> encoding. However, it is important that <abbr title="Common LUT Format">CLF</abbr> writers are respectful of certain guidelines to ensure the <abbr title="Common LUT Format">CLF</abbr> file remains usable by other readers. If you need to add proprietary metadata, please respect the following:</p>
<ol>
<li>Check the <abbr title="Common LUT Format">CLF</abbr> spec to see if there is already an element whose purpose matches what you are trying to store.</li>
<li>If not, you may create a custom <abbr title="Extensible Markup Language">XML</abbr> element to store your metadata. As described in the spec, this should typically be placed within the <code>Info</code> block. You may add additional custom elements and attributes under your main element as needed in order to easily represent your information.</li>
<li>Avoid using the standard existing elements such as <code>Description</code> in a way that is inconsistent with their purpose.</li>
<li>Avoid placing custom elements at the <code>ProcessNode</code> level since that would make it an illegal file that most parsers will reject.</li>
</ol>
<h3 id="other-metadata-considerations">Other Metadata Considerations<a class="headerlink" href="#other-metadata-considerations" title="Permanent link">&para;</a></h3>
<p>Inaccurate metadata is worse than no metadata. Implementers should make it as regular and easy as possible for the user to set required <abbr title="Common LUT Format">CLF</abbr> metadata when writing a file. Accurate metadata is critical for other users to be able to understand the intended usage of the <abbr title="Common LUT Format">CLF</abbr> file, especially the <code>Description</code>, <code>InputDescriptor</code>, and <code>OutputDescriptor</code> tags. If known by the application, the application should fill in the <code>InputDescriptor</code> and <code>OutputDescriptor</code> tags automatically. At this time, no standard list of values (i.e., text strings) for color spaces or other common settings is defined. </p>
<p>When writing a <abbr title="Common LUT Format">CLF</abbr> to represent an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transform, the <abbr title="Common LUT Format">CLF</abbr> should adhere to the structure and metadata described in <a href="#annexF">Annex F</a>.</p>
<p>If translating an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> <abbr title="Color Transform Language">CTL</abbr> (Color Transformation Language) file into <abbr title="Common LUT Format">CLF</abbr>, set the <code>ACESTransformID</code> and <code>ACESUserName</code> (under the <code>Info</code> block of metadata) using the corresponding strings from the <abbr title="Color Transform Language">CTL</abbr> header. [Examples 13] and [14] in [section 6] of the specification show CLFs using this feature.</p>
<h2 id="helpful-hints-for-a-successful-implementation">Helpful Hints for a Successful Implementation<a class="headerlink" href="#helpful-hints-for-a-successful-implementation" title="Permanent link">&para;</a></h2>
<h3 id="matrix-order"><code>Matrix</code> Order<a class="headerlink" href="#matrix-order" title="Permanent link">&para;</a></h3>
<p>Take note that the order of coefficients in the <code>Matrix</code> ProcessNode follows the usual convention in color science but that this is the transposition of both the order sometimes used in computer graphics and the order used in <abbr title="Color Transform Language">CTL</abbr>. The <a href="../specification/#matrix"><code>Matrix</code> section of the <abbr title="Common LUT Format">CLF</abbr> Specification</a> clearly documents the ordering of matrix coefficients that must be used. Also, note that the 3x4 matrix includes an offset value after each of the three matrix values.</p>
<h3 id="lut3d-serialization-order"><code>LUT3D</code> Serialization Order<a class="headerlink" href="#lut3d-serialization-order" title="Permanent link">&para;</a></h3>
<p>As described in the <a href="../specification/#lut3d"><code>LUT3D</code> section of the <abbr title="Common LUT Format">CLF</abbr> Specification</a>, take note that the <code>LUT3D</code> ProcessNode serializes the <abbr title="look-up table">LUT</abbr> entries in blue-fastest order. This is a commonly used ordering (for example it is used by the common .3dl format) but some other formats use red-fastest ordering (e.g., .cube format).</p>
<h3 id="gamma-polarity">Gamma Polarity<a class="headerlink" href="#gamma-polarity" title="Permanent link">&para;</a></h3>
<p>As described in the <a href="../specification/#exponent"><code>Exponent</code> section of the <abbr title="Common LUT Format">CLF</abbr> Specification</a>, take note that the <code>Exponent</code> ProcessNode uses the specified parameter directly in the power function for the forward direction. This is the same usage as in an <abbr title="American Society of Cinematographers">ASC</abbr> <abbr title="Color Decision List">CDL</abbr> power. But take care since often "gamma" operators in color processing software apply the inverse of the power for the forward direction.</p>
<h3 id="bit-depth-attributes-dont-affect-processing-precision">Bit-Depth Attributes Don't Affect Processing Precision<a class="headerlink" href="#bit-depth-attributes-dont-affect-processing-precision" title="Permanent link">&para;</a></h3>
<p>As called out in the <abbr title="Common LUT Format">CLF</abbr> specification, the <code>inBitDepth</code> and <code>outBitDepth</code> attributes of <code>ProcessNodes</code> are not intended to control the processing precision, which should normally be 32-bit floating-point. Rather, these attributes simply determine the scaling of various parameter values such as matrix and <abbr title="look-up table">LUT</abbr> entries. Please refer to the <a href="../specification/#bit-depth">Bit Depth section of the <abbr title="Common LUT Format">CLF</abbr> Specification</a> for the details.</p>
<h3 id="conversion-between-bit-depths">Conversion Between Bit-Depths<a class="headerlink" href="#conversion-between-bit-depths" title="Permanent link">&para;</a></h3>
<p>When interpreting the <code>inBitDepth</code> and <code>outBitDepth</code> attributes, conversions happen using "power of two minus 1" scaling rather than "power of 2" scaling. Please refer to the <a href="../specification/#scaling">section on conversion between bit depths in the <abbr title="Common LUT Format">CLF</abbr> Specification</a> for the details.</p>
<h2 id="appendices">Appendices<a class="headerlink" href="#appendices" title="Permanent link">&para;</a></h2>
<h3 id="annexA">Annex A: Test Image<a class="headerlink" href="#annexA" title="Permanent link">&para;</a></h3>
<p><img src="images/CLF_testImagePrototype_v008.jpg" width="50%" /><img src="images/clf-image-legend.png" width="50%" /></p>
<p>A 16-bit OpenEXR test image was designed with many ramps and other values which should be useful for testing any <abbr title="Common LUT Format">CLF</abbr> and/or <abbr title="Common LUT Format">CLF</abbr> implementation. The image includes:</p>
<ul>
<li>33x33 cube spanning -1.0 to 1.0 </li>
<li>33x33 cube spanning -65504 to 65504</li>
<li>an ACES2065-1 ColorChecker chart</li>
<li>0-1 grayscale ramps</li>
<li>ColorChecker values and primaries/secondaries ramped in ½ stop increments</li>
<li>a set of ramps designed to generate a spiderweb when viewed on a vectorscope</li>
<li>extents lattice ramps designed to produce a bounding box around all possible normal positive and negative values when viewed in 3D</li>
</ul>
<p>Specific details for each of the image subsections can be found in the README at <a href="https://github.com/alexfry/CLFTestImage">https://github.com/alexfry/CLFTestImage</a></p>
<p>The test image (named <code>CLF_Finishing_SourceImage_v008.exr</code>) is included along with the processed reference images in the download referenced in <a href="#annexC">Annex C</a> and <a href="#annexD">D</a>.</p>
<h3 id="annexB">Annex B: <abbr title="Common LUT Format">CLF</abbr> Test Suite Listing<a class="headerlink" href="#annexB" title="Permanent link">&para;</a></h3>
<p>These test files may be found in the OpenColorIO repository on GitHub:
<a href="https://github.com/AcademySoftwareFoundation/OpenColorIO">https://github.com/AcademySoftwareFoundation/OpenColorIO</a></p>
<p>The files are in the sub-directory: <code>OpenColorIO/tests/data/files/clf</code></p>
<p>Note: Some of the test files intentionally use unusual or difficult syntax to give a thorough test for parsers. They are not all intended as "best practice" examples.</p>
<h4 id="legal-test-files">Legal test files<a class="headerlink" href="#legal-test-files" title="Permanent link">&para;</a></h4>
<p>An implementation should be able to load and process these files successfully.</p>
<table>
<thead>
<tr>
<th>Index</th>
<th>Filename</th>
<th>Ops tested</th>
<th>Description</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>0010</td>
<td>aces_to_video_with_look.clf</td>
<td>Matrix, Log, <abbr title="Color Decision List">CDL</abbr>, Lut3D</td>
<td>ACES2065-1 to ACEScct, <abbr title="Color Decision List">CDL</abbr>, then <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Output Transform</td>
<td>Interpolation=tetrahedral</td>
</tr>
<tr>
<td>0020</td>
<td>cdl_all_styles.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>One <abbr title="American Society of Cinematographers">ASC</abbr> <abbr title="Color Decision List">CDL</abbr> of each style</td>
<td></td>
</tr>
<tr>
<td>0030</td>
<td>cdl_clamp_fwd.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>Basic single <abbr title="Color Decision List">CDL</abbr></td>
<td>Has newlines in Slope element</td>
</tr>
<tr>
<td>0040</td>
<td>cdl_missing_sat.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>Basic single <abbr title="Color Decision List">CDL</abbr> without SatNode</td>
<td></td>
</tr>
<tr>
<td>0050</td>
<td>cdl_missing_sop.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>Basic single <abbr title="Color Decision List">CDL</abbr> without SOPNode</td>
<td></td>
</tr>
<tr>
<td>0060</td>
<td>cdl_missing_style.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>Basic single <abbr title="Color Decision List">CDL</abbr>, relying on default style</td>
<td></td>
</tr>
<tr>
<td>0070</td>
<td>difficult_syntax.clf</td>
<td>Matrix, Lut1D</td>
<td>Legal file with lots of unusual formatting to stress parsers</td>
<td></td>
</tr>
<tr>
<td>0080</td>
<td>exponent_all_styles.clf</td>
<td>Exponent, Range</td>
<td>One Exponent of each style</td>
<td></td>
</tr>
<tr>
<td>0090</td>
<td>info_example.clf</td>
<td>Matrix</td>
<td>Info metadata element with app-specific elements</td>
<td></td>
</tr>
<tr>
<td>0100</td>
<td>inverseOf_id_test.clf</td>
<td>Lut1D</td>
<td>Example of inverseOf ProcessList attribute</td>
<td></td>
</tr>
<tr>
<td>0110</td>
<td>log_all_styles.clf</td>
<td>Log, Range</td>
<td>At least one Log op of each style and LogParams usage</td>
<td></td>
</tr>
<tr>
<td>0120</td>
<td>lut1d_32f_example.clf</td>
<td>Lut1D</td>
<td>Basic 65x1 32f/32f Lut1D</td>
<td>Array is monotonic decreasing</td>
</tr>
<tr>
<td>0130</td>
<td>lut1d_comp.clf</td>
<td>Lut1D</td>
<td>Two Lut1D ops, 2x1 8i/8i and 32x3 8i/32f</td>
<td>Channels of the 32x3 are unequal</td>
</tr>
<tr>
<td>0140</td>
<td>lut1d_example.clf</td>
<td>Lut1D</td>
<td>Basic 65x1 8i/12i Lut1D</td>
<td>Array values exceed nominal 12i range and must not be clamped</td>
</tr>
<tr>
<td>0150</td>
<td>lut1d_half_domain_raw_half_set.clf</td>
<td>Lut1D</td>
<td>Lut1D 65536x1 16f/16f using halfDomain and rawHalfs</td>
<td></td>
</tr>
<tr>
<td>0160</td>
<td>lut1d_long.clf</td>
<td>Lut1D</td>
<td>Lut1D 131072x1 32f/16f</td>
<td>Array contains occasional duplicate/quantized values</td>
</tr>
<tr>
<td>0170</td>
<td>lut3d_17x17x17_10i_12i.clf</td>
<td>Lut3D</td>
<td>Typical Lut3D 17x17x17 10i/12i</td>
<td>No interpolation set (should use trilinear)</td>
</tr>
<tr>
<td>0180</td>
<td>lut3d_bizarre.clf</td>
<td>Lut3D</td>
<td>Unusual 3x3x3 10i/10i Lut3D, interpolation=tetrahedral</td>
<td>Array values exceed nominal 10i range and must not be clamped</td>
</tr>
<tr>
<td>0190</td>
<td>lut3d_identity_12i_16f.clf</td>
<td>Lut3D</td>
<td>Basic identity 2x2x2 12i/16f Lut3D</td>
<td>Interpolation=tetrahedral</td>
</tr>
<tr>
<td>0200</td>
<td>lut3d_preview_tier_test.clf</td>
<td>Lut3D</td>
<td>Typical Lut3D 33x33x33 32f/10i, tetrahedral</td>
<td>This is the file used for the Preview-tier processing test. Values clamped to [4,1019].</td>
</tr>
<tr>
<td>0210</td>
<td>matrix_3x4_example.clf</td>
<td>Matrix</td>
<td>Matrix 3x4 10i/12i, includes "+" and "e-1" in Array</td>
<td>The 10i/12i depths requires normalizing the Array values by 1023/4095</td>
</tr>
<tr>
<td>0220</td>
<td>matrix_example_utf8.clf</td>
<td>Matrix</td>
<td>Matrix 3x3 32f/32f</td>
<td>Matrix Description uses non-ASCII characters</td>
</tr>
<tr>
<td>0230</td>
<td>matrix_example.clf</td>
<td>Matrix</td>
<td>Matrix 3x3 32f/32f</td>
<td>Uses the legal dim="3 3 3" syntax allowed for <abbr title="Common LUT Format">CLF</abbr> v2 compatibility</td>
</tr>
<tr>
<td>0240</td>
<td>matrix_no_newlines.clf</td>
<td>Matrix</td>
<td>Matrix 3x4 10i/10i, compact formatting with no newlines</td>
<td></td>
</tr>
<tr>
<td>0250</td>
<td>matrix_windows.clf</td>
<td>Matrix</td>
<td>Identity Matrix 3x3 16f/12i, Windows line-endings</td>
<td>Per section 3.2.6 of the spec, Linux newlines should be used. But for maximum robustness, ideally other line-endings should be tolerated</td>
</tr>
<tr>
<td>0260</td>
<td>multiple_ops.clf</td>
<td>All ops</td>
<td>Tests at least one of all ops</td>
<td></td>
</tr>
<tr>
<td>0270</td>
<td>range_test1_clamp.clf</td>
<td>Range</td>
<td>Range 8i/32f with Clamp style</td>
<td>The 8i minIn/maxIn values require normalizing by 1/255</td>
</tr>
<tr>
<td>0280</td>
<td>range_test1_noclamp.clf</td>
<td>Range</td>
<td>Range 8i/32f with noClamp style</td>
<td></td>
</tr>
<tr>
<td>0290</td>
<td>range_test2.clf</td>
<td>Range</td>
<td>Range 32f/16f, minValue only, with Clamp style</td>
<td></td>
</tr>
<tr>
<td>0300</td>
<td>range.clf</td>
<td>Range</td>
<td>Range 16i/16i, relying on default style (Clamp)</td>
<td>The 16i values require normalizing by 1/65535</td>
</tr>
<tr>
<td>0310</td>
<td>tabulation_support.clf</td>
<td>Lut3D</td>
<td>Lut3D 3x3x3 10i/10i, interpolation=tetrahedral</td>
<td>The Array <abbr title="Red, Green, and Blue">RGB</abbr> values are only separated by tabs</td>
</tr>
<tr>
<td>0320</td>
<td>xyz_to_rgb.clf</td>
<td>Matrix, Range, Lut1D</td>
<td>Matrix 3x3 32f/32f, Range, and Lut1D 128x3 32f/32f</td>
<td>The Lut1D Array columns are unequal</td>
</tr>
</tbody>
</table>
<h4 id="illegal-test-files">Illegal test files<a class="headerlink" href="#illegal-test-files" title="Permanent link">&para;</a></h4>
<p>These files should not load successfully and the implementation should indicate that it is not a legal file. The files are in the directory: <code>OpenColorIO/tests/data/files/clf/illegal</code></p>
<table>
<thead>
<tr>
<th>Index</th>
<th>Filename</th>
<th>Ops tested</th>
<th>Description</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>0010</td>
<td>array_bad_dimension.clf</td>
<td>Matrix</td>
<td>Array dim attribute has 10 numbers</td>
<td></td>
</tr>
<tr>
<td>0020</td>
<td>array_bad_value.clf</td>
<td>Matrix</td>
<td>Array has "P" for the 4th value rather than a number</td>
<td></td>
</tr>
<tr>
<td>0030</td>
<td>array_missing_values.clf</td>
<td>Matrix</td>
<td>Array has 3 values instead of 9</td>
<td></td>
</tr>
<tr>
<td>0040</td>
<td>array_too_many_values.clf</td>
<td>Matrix</td>
<td>Array has 18 values instead of 9</td>
<td></td>
</tr>
<tr>
<td>0050</td>
<td>cdl_bad_power.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>One of the power values is 0</td>
<td></td>
</tr>
<tr>
<td>0060</td>
<td>cdl_bad_sat.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>Saturation has 2 values instead of 1</td>
<td></td>
</tr>
<tr>
<td>0070</td>
<td>cdl_bad_slope.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>Slope has 2 values rather than 3</td>
<td></td>
</tr>
<tr>
<td>0080</td>
<td>cdl_bad_style.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>Style is "invalid_cdl_style"</td>
<td></td>
</tr>
<tr>
<td>0090</td>
<td>cdl_missing_offset.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>The SOPNode is missing the Offset element</td>
<td></td>
</tr>
<tr>
<td>0100</td>
<td>cdl_missing_power.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>The SOPNode is missing the Power element</td>
<td></td>
</tr>
<tr>
<td>0110</td>
<td>cdl_missing_slope.clf</td>
<td><abbr title="Color Decision List">CDL</abbr></td>
<td>The SOPNode is missing the Slope element</td>
<td></td>
</tr>
<tr>
<td>0120</td>
<td>exponent_bad_param.clf</td>
<td>Exponent</td>
<td>The basicFwd style may not use the offset attribute</td>
<td></td>
</tr>
<tr>
<td>0130</td>
<td>exponent_bad_value.clf</td>
<td>Exponent</td>
<td>The monCurveFwd style requires exponent to be &gt;= 1</td>
<td></td>
</tr>
<tr>
<td>0140</td>
<td>image_png.clf</td>
<td>None</td>
<td>File is a binary PNG image, not actually a <abbr title="Common LUT Format">CLF</abbr> file</td>
<td></td>
</tr>
<tr>
<td>0150</td>
<td>indexMap_test2.clf</td>
<td>Lut3D</td>
<td>The IndexMap element is no longer allowed in <abbr title="Common LUT Format">CLF</abbr> v3</td>
<td></td>
</tr>
<tr>
<td>0160</td>
<td>log_bad_param.clf</td>
<td>Log</td>
<td>The linToLog style may not contain the linSideBreak parameter</td>
<td></td>
</tr>
<tr>
<td>0170</td>
<td>log_bad_style.clf</td>
<td>Log</td>
<td>Style is "invalidStyle"</td>
<td></td>
</tr>
<tr>
<td>0180</td>
<td>log_bad_version.clf</td>
<td>Log</td>
<td>The compCLFversion = 2.0, Log was introduced in v3</td>
<td></td>
</tr>
<tr>
<td>0190</td>
<td>log_missing_breakpnt.clf</td>
<td>Log</td>
<td>The cameraLogToLin style must have the linSideBreak parameter</td>
<td></td>
</tr>
<tr>
<td>0200</td>
<td>lut1d_half_domain_missing_values.clf</td>
<td>Lut1D</td>
<td>A half-domain <abbr title="look-up table">LUT</abbr> must have 65536 values</td>
<td></td>
</tr>
<tr>
<td>0210</td>
<td>lut1d_half_domain_set_false.clf</td>
<td>Lut1D</td>
<td>The halfDomain attribute may only have the value "true"</td>
<td></td>
</tr>
<tr>
<td>0220</td>
<td>lut1d_raw_half_set_false.clf</td>
<td>Lut1D</td>
<td>The rawHalfs attribute may only have the value "true"</td>
<td></td>
</tr>
<tr>
<td>0230</td>
<td>lut3d_unequal_size.clf</td>
<td>Lut3D</td>
<td>The Array dimension is 2x2x3x3</td>
<td></td>
</tr>
<tr>
<td>0240</td>
<td>matrix_end_missing.clf</td>
<td>Matrix</td>
<td>There is no </Matrix> element</td>
<td></td>
</tr>
<tr>
<td>0250</td>
<td>process_list_bad_version.clf</td>
<td>Matrix</td>
<td>The compCLFversion = "three"</td>
<td></td>
</tr>
<tr>
<td>0260</td>
<td>process_list_higher_version.clf</td>
<td>Matrix</td>
<td>The compCLFversion = "3.2"</td>
<td></td>
</tr>
<tr>
<td>0270</td>
<td>process_list_missing.clf</td>
<td>Matrix</td>
<td>The ProcessList element is missing</td>
<td></td>
</tr>
<tr>
<td>0280</td>
<td>range_bad_noclamp.clf</td>
<td>Range</td>
<td>The noClamp style must have both min and max values</td>
<td></td>
</tr>
<tr>
<td>0290</td>
<td>range_bad_values.clf</td>
<td>Range</td>
<td>The minInValue must be less than the maxInValue</td>
<td></td>
</tr>
<tr>
<td>0300</td>
<td>range_empty.clf</td>
<td>Range</td>
<td>The Range element must have at least min or max values</td>
<td></td>
</tr>
<tr>
<td>0310</td>
<td>range_nonmatching_clamp.clf</td>
<td>Range</td>
<td>A one-sided Range must use the same normalized value for in and out</td>
<td>Because the bit-depths differ, the values are not actually the same</td>
</tr>
<tr>
<td>0320</td>
<td>transform_bad_outdepth.clf</td>
<td>Matrix</td>
<td>The outBitDepth is "16d"</td>
<td></td>
</tr>
<tr>
<td>0330</td>
<td>transform_bitdepth_mismatch.clf</td>
<td>Matrix, Lut1D</td>
<td>The inBitDepth does not match the previous outBitDepth</td>
<td>Also missing the <abbr title="Extensible Markup Language">XML</abbr> header (though this is legal)</td>
</tr>
<tr>
<td>0340</td>
<td>transform_corrupted_tag.clf</td>
<td>Matrix</td>
<td>The closing ProcessList element is incorrect</td>
<td></td>
</tr>
<tr>
<td>0350</td>
<td>transform_element_end_missing.clf</td>
<td>Matrix</td>
<td>The closing ProcessList element is missing</td>
<td></td>
</tr>
<tr>
<td>0360</td>
<td>transform_empty.clf</td>
<td>None</td>
<td>The ProcessList must have at least one ProcessNode operator</td>
<td></td>
</tr>
<tr>
<td>0370</td>
<td>transform_id_empty.clf</td>
<td>Log</td>
<td>The ProcessList id attribute must not be empty</td>
<td></td>
</tr>
<tr>
<td>0380</td>
<td>transform_missing_id.clf</td>
<td>Log</td>
<td>The ProcessList id attribute must be present</td>
<td></td>
</tr>
<tr>
<td>0390</td>
<td>transform_missing_inbitdepth.clf</td>
<td>Lut1D</td>
<td>The inBitDepth attribute is missing</td>
<td></td>
</tr>
<tr>
<td>0400</td>
<td>transform_missing_outbitdepth.clf</td>
<td>Lu1D</td>
<td>The outBitDepth attribute is missing</td>
<td></td>
</tr>
<tr>
<td>0410</td>
<td>transform_missing.clf</td>
<td>None</td>
<td>There is nothing except the <abbr title="Extensible Markup Language">XML</abbr> header</td>
<td></td>
</tr>
<tr>
<td>0420</td>
<td>unknown_elements.clf</td>
<td>Matrix, Lut1D, Lut3D</td>
<td>The ProcessList contains unknown elements outside the Info element</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="annexC">Annex C: Finishing Tier Apply Test <abbr title="Common LUT Format">CLF</abbr> List<a class="headerlink" href="#annexC" title="Permanent link">&para;</a></h3>
<p>The list of <abbr title="Common LUT Format">CLF</abbr> files for the Finishing Tier apply test is the complete list of legal files in <a href="#annexB">Annex B</a>.</p>
<p>Processed reference images may be downloaded from here: <a href="https://www.dropbox.com/s/qy4zm8g06uz7drc/CLF_ApplyTestImages_v01.zip?dl=0"><abbr title="Common LUT Format">CLF</abbr> Apply Test Images</a></p>
<h3 id="annexD">Annex D: Preview Tier Apply Test <abbr title="Common LUT Format">CLF</abbr> List<a class="headerlink" href="#annexD" title="Permanent link">&para;</a></h3>
<p>The <abbr title="Common LUT Format">CLF</abbr> file for the Preview Tier apply test is simply: 
<code>lut3d_preview_tier_test.clf</code></p>
<p>Processed reference images may be downloaded from here: <a href="https://www.dropbox.com/s/qy4zm8g06uz7drc/CLF_ApplyTestImages_v01.zip?dl=0"><abbr title="Common LUT Format">CLF</abbr> Apply Test Images</a></p>
<h3 id="annexE">Annex E: Baking a <abbr title="Common LUT Format">CLF</abbr> for Preview Tier Implementation<a class="headerlink" href="#annexE" title="Permanent link">&para;</a></h3>
<p>Because <abbr title="Common LUT Format">CLF</abbr> allows a fairly powerful set of processing operators that may be assembled into pipelines of any ordering and any length, it will not be possible to exactly evaluate all CLFs on hardware or software that has a fixed processing pipeline. (In other words, the implementation must allow the <abbr title="Common LUT Format">CLF</abbr> file itself to specify the pipeline of operators for a given color transform.)</p>
<p>Converting color transforms into a simpler structure to make them simpler to evaluate is known as <em>baking</em>. This is often done to meet the needs of a particular hardware implementation. </p>
<p>There are a number of factors that make the process of accurately baking color transforms a difficult and complicated subject:</p>
<ul>
<li><abbr title="Common LUT Format">CLF</abbr> is intended to support the needs of floating-point scene-linear color spaces and therefore the range of possible input and output values extends from very small to very large numbers (both positive and negative).</li>
<li>A given <abbr title="Common LUT Format">CLF</abbr> may expect virtually any color space (scene-linear, camera log, video, etc.) on input and another completely different space on output.</li>
<li>The flexible nature of <abbr title="Common LUT Format">CLF</abbr> and the way a chain of operators is built up makes it fairly easy for the function to have abrupt changes in slope. For example, at the edge of a gamut boundary, or due to a conversion into an internal working space for a look transform. These slope changes are usually not captured accurately when the transform is baked.</li>
<li>The human visual system is often able to detect fairly small errors in color reproduction, particularly in dark colors.</li>
</ul>
<p>All of that said, there are many successful products that have used a baking process. For example, this technique is often used in products designed for on-set production monitoring involving look transforms. So it is highly likely that baking of CLFs could be a successful strategy for Preview Tier products. The key will be to clearly document the types of color transforms that may be successfully baked and those that the user should avoid.</p>
<p>Integer-based implementations in the Preview Tier will typically be processing video or logarithmic color space encodings. So for example, if the documentation suggests avoiding use of CLFs expecting scene-linear color spaces on input, that is probably fine since (hopefully!) no one will be trying to send raw scene-linear values through an integer connection such as <abbr title="Serial Digital Interface">SDI</abbr> video.</p>
<p>The accuracy of the baking process may be judged by sending images through both the original <abbr title="Common LUT Format">CLF</abbr> and the baked <abbr title="Common LUT Format">CLF</abbr> and comparing them. OpenColorIO or any product that passes the Finishing Tier tests could be used for this type of comparison. But keep in mind that the result will depend on many factors, including the input and output color spaces and the internal structure of the original <abbr title="Common LUT Format">CLF</abbr>. So even though one <abbr title="Common LUT Format">CLF</abbr> may bake accurately through a given baking process, it certainly does not mean that all of them will. Testing with a range of user transforms is essential.</p>
<p>OpenColorIO may be used to experiment with baking CLFs using the command-line tool <code>ociobakelut</code>. For example, here is a command that takes an original <abbr title="Common LUT Format">CLF</abbr> named <code>complicated.clf</code> and bakes it into a single <code>LUT3D</code> with a cube dimension of 33x33x33 called <code>simple.clf</code>:</p>
<div class="highlight"><pre><span></span><code>$ ociobakelut --lut complicated.clf --cubesize 33 --format &quot;Academy/ASC Common LUT Format&quot; --v simple.clf
</code></pre></div>
<p>You may edit the resulting <abbr title="Common LUT Format">CLF</abbr> <abbr title="Extensible Markup Language">XML</abbr> file in a text editor to add the <code>interpolation="tetrahedral"</code> attribute to the <code>LUT3D</code> and any desired metadata.</p>
<p>For CLFs that convert from one perceptually uniform color space to another (i.e., between most logarithmic and video color spaces), this will often be reasonably accurate for Preview Tier devices. Increasing the cube size will improve accuracy (the default <code>cubesize</code> is 64x64x64).</p>
<p>However, this would not work well for baking a <abbr title="Common LUT Format">CLF</abbr> that expects a scene-linear color space on input. In those situations, the usual technique is to add some kind of a "shaper" <code>LUT1D</code> or other non-linear transform in front of the <code>LUT3D</code> that will convert the linear values into something more perceptually uniform. A more modern and compact technique that takes advantage of the <abbr title="Common LUT Format">CLF</abbr> capabilities would be to insert a <code>Log</code> ProcessNode rather than a <code>LUT1D</code>, but the most appropriate technique would be based on the needs of the given implementation.</p>
<p>The <code>ociobakelut</code> tool is able to bake with shaper <abbr title="look-up tables">LUTs</abbr>, but it requires an <abbr title="OpenColorIO">OCIO</abbr> config file to define the input, output, and shaper spaces. But for the use-case here, the input is just a single <abbr title="Common LUT Format">CLF</abbr> file, so there is no <abbr title="OpenColorIO">OCIO</abbr> config file to use. OpenColorIO could still be used to do these more advanced types of baking, but it would require some scripting. One approach would be to create a config file that references the original <abbr title="Common LUT Format">CLF</abbr> as a file transform and includes an appropriate shaper space. Another approach would be to just use the <abbr title="OpenColorIO">OCIO</abbr> API directly to write your own baking tool, using the <code>ociobakelut</code> code for inspiration. (And if so, we encourage you to contribute it back to the <abbr title="OpenColorIO">OCIO</abbr> project!)</p>
<p>The <code>ociobakelut</code> command supports many arguments; use the <code>-h</code> argument for a summary. For example, note that you may supply many <code>--lut</code> arguments on the command line and they will all be baked together into the result. You may also consult the <a href="https://opencolorio.readthedocs.io/en/latest/tutorials/baking_luts.html#userguide-bakelut">Baking <abbr title="look-up table">LUT</abbr>’s</a> section of the <abbr title="OpenColorIO">OCIO</abbr> documentation for a tutorial on using <code>ociobakelut</code>.</p>
<h3 id="annexF">Annex F: Using <abbr title="Common LUT Format">CLF</abbr> to represent <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transforms<a class="headerlink" href="#annexF" title="Permanent link">&para;</a></h3>
<p>Historically, look workflows have been based on applying a look in some kind of logarithmic color space, for example, a camera log space. This is partly because the existing infrastructure was built for integer pixel formats and did not support floating-point pixel formats. (The Preview Tier described above is an attempt to define requirements for these integer-based devices.) And until <abbr title="Common LUT Format">CLF</abbr>, previous <abbr title="look-up table">LUT</abbr> formats did not support scene-linear color spaces well.</p>
<p>However, the input values and output values of <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transforms (also known as "LMTs") must be ACES2065-1. This is to maintain universality of Look Transforms and not link them to project-specific working spaces. Look Transforms may then convert ACES2065-1 to some other working space internally (e.g., a camera log space) for look application. This is the vision for the future and the <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Metadata File (<abbr title="ACES Metadata File">AMF</abbr>) format expects implementations to work this way.</p>
<p>As an aside, it is recommended that the <code>InputDescriptor</code> and <code>OutputDescriptor</code> be set to ACES2065-1 when authoring Look Transforms as CLFs so it is always clear what the expected input and output color spaces are. The <code>Description</code> tag and other metadata may also be used to provide a more complete description of the look.</p>
<p>When look operations are to be performed in a working space other than ACES2065-1, then appropriate conversions to and from the required working space can be prepended and appended within a <abbr title="Common LUT Format">CLF</abbr> to communicate the transform. For accuracy, whenever possible, these conversions should be implemented using discrete operations such as <code>Log</code> and <code>Matrix</code> ProcessNodes rather than <code>LUT1D</code> or <code>LUT3D</code>. </p>
<p>By using ProcessNodes such as <code>Log</code> and <code>Matrix</code>, a <abbr title="Common LUT Format">CLF</abbr> author makes it easier for an implementation to detect and remove any unnecessary conversions when applying the <abbr title="Common LUT Format">CLF</abbr>. For example, OpenColorIO will do this when optimizing transform chains.</p>
<p>The <abbr title="OpenColorIO">OCIO</abbr> tool <code>ociomakeclf</code> can create an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transform by prepending and appending the appropriate color space conversions to an existing look <abbr title="look-up table">LUT</abbr> file. For example, if an existing look <abbr title="look-up table">LUT</abbr> expects ACEScct input and outputs ACEScct, the <code>--csc ACEScct</code> option will add appropriate conversions from ACES2065-1 to ACEScct at the beginning and from ACEScct back to ACES2065-1 at the end.</p>
<p><strong>Example:</strong></p>
<p>Convert the look <code>CDL cdl_test2.cc</code> that expects and produces ACEScct values to an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transform in <abbr title="Common LUT Format">CLF</abbr> format that expects and produces ACES2065-1 values:
<div class="highlight"><pre><span></span><code>$ ociomakeclf OpenColorIO/tests/data/files/cdl_test2.cc LMT.clf --csc ACEScct
</code></pre></div></p>
<p>This generates the following <abbr title="Common LUT Format">CLF</abbr>:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ProcessList</span><span class="w"> </span><span class="na">compCLFversion=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;669980ac1ecd97ab18c1707250a13d20&quot;</span><span class="nt">&gt;</span>

<span class="cm">&lt;!-- Header metadata --&gt;</span>
<span class="w">    </span><span class="nt">&lt;Description&gt;</span>ACES<span class="w"> </span>LMT<span class="w"> </span>transform<span class="w"> </span>built<span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>look<span class="w"> </span>LUT<span class="w"> </span>expecting<span class="w"> </span>color<span class="w"> </span>space:<span class="w"> </span>ACEScct<span class="nt">&lt;/Description&gt;</span>
<span class="w">    </span><span class="nt">&lt;Description&gt;</span>Original<span class="w"> </span>LUT<span class="w"> </span>name:<span class="w"> </span>OpenColorIO/tests/data/files/cdl_test2.cc<span class="nt">&lt;/Description&gt;</span>
<span class="w">    </span><span class="nt">&lt;InputDescriptor&gt;</span>ACES2065-1<span class="nt">&lt;/InputDescriptor&gt;</span>
<span class="w">    </span><span class="nt">&lt;OutputDescriptor&gt;</span>ACES2065-1<span class="nt">&lt;/OutputDescriptor&gt;</span>

<span class="cm">&lt;!-- Convert from ACES2065-1 to ACEScct --&gt;</span>
<span class="w">    </span><span class="nt">&lt;Matrix</span><span class="w"> </span><span class="na">inBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">outBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;Array</span><span class="w"> </span><span class="na">dim=</span><span class="s">&quot;3 3&quot;</span><span class="nt">&gt;</span>
<span class="w"> </span>1.45143931614567<span class="w">    </span>-0.23651074689374<span class="w">   </span>-0.214928569251925
-0.0765537733960206<span class="w"> </span>1.17622969983357<span class="w">   </span>-0.0996759264375522
<span class="w"> </span>0.00831614842569772<span class="w"> </span>-0.00603244979102103<span class="w"> </span>0.997716301365323
<span class="w">            </span><span class="nt">&lt;/Array&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Matrix&gt;</span>
<span class="w">    </span><span class="nt">&lt;Log</span><span class="w"> </span><span class="na">inBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">outBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">style=</span><span class="s">&quot;cameraLinToLog&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;LogParams</span><span class="w"> </span><span class="na">base=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">linSideSlope=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">linSideOffset=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">logSideSlope=</span><span class="s">&quot;0.0570776255707763&quot;</span><span class="w"> </span><span class="na">logSideOffset=</span><span class="s">&quot;0.554794520547945&quot;</span><span class="w"> </span><span class="na">linSideBreak=</span><span class="s">&quot;0.0078125&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Log&gt;</span>

<span class="cm">&lt;!-- Apply the user&#39;s CDL look in the ACEScct working space --&gt;</span>
<span class="w">    </span><span class="nt">&lt;ASC_CDL</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;cc0001&quot;</span><span class="w"> </span><span class="na">inBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">outBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">style=</span><span class="s">&quot;FwdNoClamp&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;SOPNode&gt;</span>
<span class="w">            </span><span class="nt">&lt;Slope&gt;</span>1.0<span class="w"> </span>1.0<span class="w"> </span>0.9<span class="nt">&lt;/Slope&gt;</span>
<span class="w">            </span><span class="nt">&lt;Offset&gt;</span>-0.03<span class="w"> </span>-0.02<span class="w"> </span>0.0<span class="nt">&lt;/Offset&gt;</span>
<span class="w">            </span><span class="nt">&lt;Power&gt;</span>1.25<span class="w"> </span>1.0<span class="w"> </span>1.0<span class="nt">&lt;/Power&gt;</span>
<span class="w">        </span><span class="nt">&lt;/SOPNode&gt;</span>
<span class="w">        </span><span class="nt">&lt;SatNode&gt;</span>
<span class="w">            </span><span class="nt">&lt;Saturation&gt;</span>1.7<span class="nt">&lt;/Saturation&gt;</span>
<span class="w">        </span><span class="nt">&lt;/SatNode&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ASC_CDL&gt;</span>

<span class="cm">&lt;!-- Convert from ACEScct back to ACES2065-1 --&gt;</span>
<span class="w">    </span><span class="nt">&lt;Log</span><span class="w"> </span><span class="na">inBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">outBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">style=</span><span class="s">&quot;cameraLogToLin&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;LogParams</span><span class="w"> </span><span class="na">base=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">linSideSlope=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">linSideOffset=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">logSideSlope=</span><span class="s">&quot;0.0570776255707763&quot;</span><span class="w"> </span><span class="na">logSideOffset=</span><span class="s">&quot;0.554794520547945&quot;</span><span class="w"> </span><span class="na">linSideBreak=</span><span class="s">&quot;0.0078125&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Log&gt;</span>
<span class="w">    </span><span class="nt">&lt;Matrix</span><span class="w"> </span><span class="na">inBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">outBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;Array</span><span class="w"> </span><span class="na">dim=</span><span class="s">&quot;3 3&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span>0.695452241357452<span class="w">    </span>0.140678696470294<span class="w">    </span>0.163869062172254
<span class="w">  </span>0.0447945633720377<span class="w">   </span>0.859671118456422<span class="w">    </span>0.0955343181715404
<span class="w"> </span>-0.00552588255811354<span class="w">  </span>0.00402521030597866<span class="w">  </span>1.00150067225213
<span class="w">            </span><span class="nt">&lt;/Array&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Matrix&gt;</span>
<span class="nt">&lt;/ProcessList&gt;</span>
</code></pre></div>
<p>Note that an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transform is usually just one component in a larger pipeline of transforms. For example, Preview Tier implementations involving on-set <abbr title="look-up table">LUT</abbr> boxes will typically incorporate the Look Transform into a chain of transforms that expect a camera log color space on input and produce a video color space on output. As noted above, the use of explicit <code>Log</code> and <code>Matrix</code> ProcessNodes in a <abbr title="Common LUT Format">CLF</abbr> transform allows an implementation to detect unnecessary operations. For example, if an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Input Transform were added in front of an <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transform that begins with the inverse of that Input Transform, the redundant operations could be optimized out for efficiency. Though in some implementations, this will all be baked into a single <code>LUT3D</code>, making such optimizations less necessary.</p>
<h3 id="annexG">Annex G: Using <abbr title="Common LUT Format">CLF</abbr> with <abbr title="ACES Metadata File">AMF</abbr><a class="headerlink" href="#annexG" title="Permanent link">&para;</a></h3>
<p>The <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Metadata File (<abbr title="ACES Metadata File">AMF</abbr>) is a "sidecar" <abbr title="Extensible Markup Language">XML</abbr> file designed to encapsulate the metadata required to recreate <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> viewing pipelines. An <abbr title="ACES Metadata File">AMF</abbr> can carry references to one or more <abbr title="Common LUT Format">CLF</abbr> files as external <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> Look Transform files. </p>
<p>When using a <abbr title="Common LUT Format">CLF</abbr> file for <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> applications and especially when in conjunction with <abbr title="ACES Metadata File">AMF</abbr>, it is recommended that the <abbr title="Common LUT Format">CLF</abbr> <code>id</code> attribute of the <code>ProcessList</code> be populated with a <code>uuid</code>. </p>
<p>Multiple CLFs can be included by using multiple <code>lookTransform</code> elements in the <abbr title="ACES Metadata File">AMF</abbr> file. The CLFs are applied in the order in which they appear in the <abbr title="ACES Metadata File">AMF</abbr>.</p>
<p>See the <a href="../../amf/guides/implementation/"><abbr title="ACES Metadata File">AMF</abbr> Handbook</a> for more details.</p>
<h3 id="annexH">Annex H: Identity (no-op) <abbr title="Common LUT Format">CLF</abbr> example<a class="headerlink" href="#annexH" title="Permanent link">&para;</a></h3>
<p>To avoid doubt in cases where <abbr title="Common LUT Format">CLF</abbr> files are exchanged as “sidecar” files to batches of media, it may be desirable to use a standard <abbr title="Common LUT Format">CLF</abbr> form even when no transform or color modification has been assigned to certain media clips / files. In these cases it may be useful that a “No-Op” <abbr title="Common LUT Format">CLF</abbr> file be included as the associated sidecar file to communicate to downstream users that no transform is assigned. This may be preferred to not providing a sidecar <abbr title="Common LUT Format">CLF</abbr> file, as the absence of <abbr title="Common LUT Format">CLF</abbr> files for a subset of a larger media batch often raises questions in certain workflows about whether an expected file is missing.</p>
<p>For this situation, implementers may generate a minimal <abbr title="Common LUT Format">CLF</abbr> file like that shown below, where the <code>ProcessList</code> has a single <code>ProcessNode</code> of the <code>Matrix</code> type with a 3x3 identity matrix. (Implementers do not need to copy this exactly, for example there are other operators that also give an identity and details like the <code>id</code> string will differ.)</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ProcessList</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;37efa85b-5bc8-40dc-8ffe-b488a3c013ea&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;No-Op&quot;</span><span class="w"> </span><span class="na">compCLFversion=</span><span class="s">&quot;3.0&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Description&gt;</span>No-Op<span class="w"> </span>CLF<span class="nt">&lt;/Description&gt;</span>
<span class="w">    </span><span class="nt">&lt;Matrix</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;identity matrix&quot;</span><span class="w"> </span><span class="na">inBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="w"> </span><span class="na">outBitDepth=</span><span class="s">&quot;32f&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Array</span><span class="w"> </span><span class="na">dim=</span><span class="s">&quot;3 3&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span>1.0<span class="w"> </span>0.0<span class="w"> </span>0.0
<span class="w">          </span>0.0<span class="w"> </span>1.0<span class="w"> </span>0.0
<span class="w">          </span>0.0<span class="w"> </span>0.0<span class="w"> </span>1.0
<span class="w">        </span><span class="nt">&lt;/Array&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Matrix&gt;</span>
<span class="nt">&lt;/ProcessList&gt;</span>
</code></pre></div>
<h3 id="annexI">Annex I: Infinity and NaN handling<a class="headerlink" href="#annexI" title="Permanent link">&para;</a></h3>
<p>The CLFs used for the apply tests were specially chosen to avoid floating-point overflows that could turn pixels in the test target image into infinity or NaN. However, with other CLFs, the comparison script described in the other sections may fail if the resulting images have infinity or NaN pixels.</p>
<p>The handling of infinity and NaN is challenging in a number of regards. For example:</p>
<ul>
<li>There is not always consensus on what the ideal behavior is. For example, should overflows be clamped to a large finite value or allowed to produce an infinity.  </li>
<li>There are sometimes performance penalties to be extra rigorous about the handling which are not always warranted.  </li>
<li>The handling on GPUs tends to vary a lot and often does not match the CPU (where there are clearer specs for what is supposed to happen).  </li>
<li>Once these values get into a chain of color processing, there can be somewhat unexpected results. For example, <code>(Inf – Inf)</code> is NaN, likewise, <code>(0 x Inf)</code> is NaN, so quite often an infinity going into a matrix or other operator that mixes the channels results in NaNs coming out.</li>
</ul>
<p>Due to issues such as these, neither the Academy reference <abbr title="Color Transform Language">CTL</abbr> for <abbr title="Academy Color Encoding System or Academy Color Encoding Specification (depending on usage)">ACES</abbr> transforms nor OpenColorIO have ideal behavior with respect to the handling of floating-point infinity and NaN. We expect this is true of most other practical implementations and so this initial version of the Implementation Guide does not attempt to validate handling of these values.</p>
<h3 id="annexJ">Annex J: Python code for creating the Preview Tier test <abbr title="look-up table">LUT</abbr><a class="headerlink" href="#annexJ" title="Permanent link">&para;</a></h3>
<p>Here is some Python code that uses <abbr title="OpenColorIO">OCIO</abbr> to create the test <abbr title="look-up table">LUT</abbr> for the Preview Tier.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># This script builds the file for the Preview Tier test from the CLF test suite.</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">PyOpenColorIO</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ocio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">33</span><span class="p">)</span>
<span class="c1"># v =</span>
<span class="c1"># array([ 0.    ,  0.03125,  0.0625 ,  0.09375,  0.125  ,  0.15625,</span>
<span class="c1">#       0.1875 ,  0.21875,  0.25   ,  0.28125,  0.3125 ,  0.34375,</span>
<span class="c1">#       0.375  ,  0.40625,  0.4375 ,  0.46875,  0.5 ,  0.53125,</span>
<span class="c1">#       0.5625 ,  0.59375,  0.625  ,  0.65625,  0.6875 ,  0.71875,</span>
<span class="c1">#       0.75   ,  0.78125,  0.8125 ,  0.84375,  0.875  ,  0.90625,</span>
<span class="c1">#       0.9375 ,  0.96875,  1.  ])</span>

<span class="c1"># Convert the vector into the values for a Lut3D.  Uses blue-fastest order.</span>
<span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">a3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
<span class="n">gr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">a2</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">a1</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">a3</span><span class="o">.</span><span class="n">ravel</span><span class="p">()))</span>

<span class="c1"># At this point, gr is a 35937 x 3 array with min=0 and max=1.</span>

<span class="c1"># Build transforms to convert from ACEScct to Rec.709 using an ACES Output Transform.</span>
<span class="n">bt1</span> <span class="o">=</span> <span class="n">ocio</span><span class="o">.</span><span class="n">BuiltinTransform</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;ACEScct_to_ACES2065-1&#39;</span><span class="p">)</span>
<span class="n">bt2</span> <span class="o">=</span> <span class="n">ocio</span><span class="o">.</span><span class="n">BuiltinTransform</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;ACES-OUTPUT - ACES2065-1_to_CIE-XYZ-D65 - SDR-VIDEO_1.0&#39;</span><span class="p">)</span>
<span class="n">bt3</span> <span class="o">=</span> <span class="n">ocio</span><span class="o">.</span><span class="n">BuiltinTransform</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;DISPLAY - CIE-XYZ-D65_to_REC.1886-REC.709&#39;</span><span class="p">)</span>
<span class="n">dvt</span> <span class="o">=</span> <span class="n">ocio</span><span class="o">.</span><span class="n">GroupTransform</span><span class="p">(</span> <span class="p">[</span><span class="n">bt1</span><span class="p">,</span> <span class="n">bt2</span><span class="p">,</span> <span class="n">bt3</span><span class="p">]</span> <span class="p">)</span>

<span class="c1"># Set up an OCIO Processor and process the values.</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ocio</span><span class="o">.</span><span class="n">Config</span><span class="o">.</span><span class="n">CreateRaw</span><span class="p">()</span>
<span class="n">proc</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">getProcessor</span><span class="p">(</span><span class="n">dvt</span><span class="p">)</span>
<span class="n">cpu</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">getDefaultCPUProcessor</span><span class="p">()</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">cpu</span><span class="o">.</span><span class="n">applyRGB</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>   <span class="c1"># replaces tmp with output</span>

<span class="c1"># For this example, the goal was to quantize to 10-bits and clamp to [4,1019]</span>
<span class="c1"># since hardware involving SDI video may not be able to process these values.</span>
<span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">tmp</span> <span class="o">*</span> <span class="mi">1023</span><span class="p">)</span>
<span class="c1"># vals[0:10,:] =</span>
<span class="c1"># array([[   0.,   0.,    0.],</span>
<span class="c1">#        [   0.,   0.,    0.],</span>
<span class="c1">#        [   0.,   0.,    0.],</span>
<span class="c1">#        [   0.,   0.,    0.],</span>
<span class="c1">#        [   0.,   0.,   35.],</span>
<span class="c1">#        [   0.,   0.,   52.],</span>
<span class="c1">#        [   0.,   0.,   68.],</span>
<span class="c1">#        [   0.,   0.,   88.],</span>
<span class="c1">#        [   0.,   0.,  114.],</span>
<span class="c1">#        [   0.,   0.,  148.]], dtype=float32)</span>
<span class="n">vals2</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1019</span><span class="p">)</span>

<span class="c1"># Now renormalize to [0,1], vectorize, and set the data into a Lut3D.</span>
<span class="n">vals2</span> <span class="o">=</span> <span class="n">vals2</span> <span class="o">/</span> <span class="mf">1023.</span>
<span class="n">lut</span> <span class="o">=</span> <span class="n">ocio</span><span class="o">.</span><span class="n">Lut3DTransform</span><span class="p">()</span>
<span class="n">lut</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">vals2</span><span class="o">.</span><span class="n">ravel</span><span class="p">())</span>

<span class="c1"># Set some LUT attributes.</span>
<span class="n">lut</span><span class="o">.</span><span class="n">setFileOutputBitDepth</span><span class="p">(</span><span class="n">ocio</span><span class="o">.</span><span class="n">BIT_DEPTH_UINT10</span><span class="p">)</span>
<span class="n">lut</span><span class="o">.</span><span class="n">setInterpolation</span><span class="p">(</span><span class="n">ocio</span><span class="o">.</span><span class="n">INTERP_TETRAHEDRAL</span><span class="p">)</span>
<span class="n">fmd</span> <span class="o">=</span> <span class="n">lut</span><span class="o">.</span><span class="n">getFormatMetadata</span><span class="p">()</span>
<span class="n">fmd</span><span class="o">.</span><span class="n">addChildElement</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span><span class="s1">&#39;This LUT is an ACEScct to Rec.709 Output Transform, clamped to [4,1019]&#39;</span><span class="p">)</span>
<span class="c1"># print(lut)</span>
<span class="c1"># &lt;Lut3DTransform direction=forward, fileoutdepth=10ui, interpolation=tetrahedral, </span>
<span class="c1">#  gridSize=33, minrgb=[0.00391007 0.00391007 0.00391007], maxrgb=[0.99609 0.99609 </span>
<span class="c1">#  0.99609]&gt;</span>

<span class="c1"># Add the LUT to a GroupTransform, set the metadata and write.</span>
<span class="n">grp</span> <span class="o">=</span> <span class="n">ocio</span><span class="o">.</span><span class="n">GroupTransform</span><span class="p">()</span>
<span class="n">grp</span><span class="o">.</span><span class="n">appendTransform</span><span class="p">(</span><span class="n">lut</span><span class="p">)</span>
<span class="n">fmdg</span> <span class="o">=</span> <span class="n">grp</span><span class="o">.</span><span class="n">getFormatMetadata</span><span class="p">()</span>
<span class="n">fmdg</span><span class="o">.</span><span class="n">setID</span><span class="p">(</span><span class="s1">&#39;00001&#39;</span><span class="p">)</span>
<span class="n">fmdg</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span><span class="s1">&#39;Preview-tier Lut3D test&#39;</span><span class="p">)</span>
<span class="n">fmdg</span><span class="o">.</span><span class="n">addChildElement</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span><span class="s1">&#39;Test LUT for Preview-tier CLF validation test suite&#39;</span><span class="p">)</span>
<span class="n">fmdg</span><span class="o">.</span><span class="n">addChildElement</span><span class="p">(</span><span class="s1">&#39;InputDescriptor&#39;</span><span class="p">,</span><span class="s1">&#39;ACEScct&#39;</span><span class="p">)</span>
<span class="n">fmdg</span><span class="o">.</span><span class="n">addChildElement</span><span class="p">(</span><span class="s1">&#39;OutputDescriptor&#39;</span><span class="p">,</span><span class="s1">&#39;Rec.1886 / Rec.709 video&#39;</span><span class="p">)</span>
<span class="c1"># print(grp)</span>
<span class="c1"># &lt;GroupTransform direction=forward, transforms=</span>
<span class="c1">#       &lt;Lut3DTransform direction=forward, fileoutdepth=10ui, interpolation=tetrahedral, </span>
<span class="c1">#       gridSize=33, minrgb=[0.00391007 0.00391007 0.00391007], </span>
<span class="c1">#       maxrgb=[0.99609 0.99609 0.99609]&gt;&gt;</span>

<span class="n">grp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">formatName</span><span class="o">=</span><span class="s1">&#39;Academy/ASC Common LUT Format&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;/tmp/lut3d_preview_tier_test.clf&#39;</span><span class="p">)</span>
</code></pre></div>
<h3 id="annexK">Annex K: Generation of the reference images<a class="headerlink" href="#annexK" title="Permanent link">&para;</a></h3>
<p>The processed reference images may be downloaded from the URL provided in <a href="#annexC">Annex C</a> and <a href="#annexD">D</a> above. This section documents how those images were generated.</p>
<h4 id="finishing-tier-reference-images">Finishing Tier Reference Images<a class="headerlink" href="#finishing-tier-reference-images" title="Permanent link">&para;</a></h4>
<p>Since OpenColorIO is an actively maintained open source implementation of <abbr title="Common LUT Format">CLF</abbr>, it has been used to generate the processed reference images. There is a Python script in the <abbr title="OpenColorIO">OCIO</abbr> repository that may be run to generate these images. The script is run as follows (these steps assume a Linux or Mac platform but could also be done on Windows):</p>
<ol>
<li>Install OpenImageIO</li>
<li>Install OpenColorIO from source, following the instructions in the <abbr title="OpenColorIO">OCIO</abbr> documentation available from opencolorio.org.  Given that OIIO was installed in step 1, this should build the ocioconvert command-line tool, which is needed by the Python script.</li>
<li>In a shell, cd to the directory where OpenColorIO was installed and then cd into the sub-directory share/clf. This directory contains the Python script as well as a copy of the source target image described in <a href="#annexA">Annex A</a>.</li>
<li>In the shell, type:
<div class="highlight"><pre><span></span><code>$ python process_clf_test_frames.py &lt;OUTPUT-DIR&gt;
</code></pre></div>
replacing <code>&lt;OUTPUT-DIR&gt;</code> with a directory that you want to write the images to.</li>
</ol>
<p>(There are also some other optional arguments that are described if you run the script with just a "-h" option, but these are not necessary to generate the reference image set.)</p>
<h4 id="preview-tier-source-image">Preview Tier Source Image<a class="headerlink" href="#preview-tier-source-image" title="Permanent link">&para;</a></h4>
<p>The Preview Tier test uses an integer source image in DPX format. That image was generated from the main Finishing Tier floating-point source image by applying a conversion from ACES2065-1 to ACEScct. It may be generated using the command-line tool <code>oiiotool</code> that is included with OpenImageIO using the following steps (these steps assume a Linux or Mac platform but could also be done on Windows):</p>
<ol>
<li>Install a recent version of OpenImageIO and <code>oiiotool</code>, compiled with OpenColorIO support.</li>
<li>Download the OpenColorIO source code, which contains an <abbr title="OpenColorIO">OCIO</abbr> config file to use with <code>oiiotool</code>.</li>
<li>In a shell, <code>cd</code> to the directory where OpenColorIO was installed and then <code>cd</code> into the sub-directory <code>share/clf</code>. This directory contains a copy of the source target image described in <a href="#annexA">Annex A</a>.</li>
<li>Set the <abbr title="OpenColorIO">OCIO</abbr> environment variable to point to the following config file in the <abbr title="OpenColorIO">OCIO</abbr> repository: <code>docs/configurations/ocio-v2_demo.ocio</code></li>
<li>Run the command: 
<div class="highlight"><pre><span></span><code>$ oiiotool CLF_Finishing_SourceImage_v008.exr --colorconvert ACES2065-1 ACEScct -d uint10 -o CLF_Preview_SourceImage_v008.dpx
</code></pre></div></li>
</ol>
<h4 id="preview-tier-reference-image">Preview Tier Reference Image<a class="headerlink" href="#preview-tier-reference-image" title="Permanent link">&para;</a></h4>
<p>The Preview Tier reference image may then be generated as follows:</p>
<ol>
<li>Follow steps 1-5 in the previous section. At this point the current directory will be the <code>share/clf</code> sub-directory of the OpenColorIO source code.</li>
<li>Run the command: 
<div class="highlight"><pre><span></span><code>$ oiiotool CLF_Preview_SourceImage_v008.dpx --ociofiletransform ../../tests/data/files/clf/lut3d_preview_tier_test.clf -d uint10 -o lut3d_preview_tier_test.dpx
</code></pre></div></li>
</ol>
<!-- Include section numbering -->
<style>
    @import "../../stylesheets/sections.css"
</style>

<!-- SPDX-License-Identifier: CC-BY-4.0 -->
<!-- Copyright Contributors to the ACES Documentation -->







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 10, 2025 18:41:26 PDT">September 10, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Academy of Motion Picture Arts & Sciences
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.github.com/ampas" target="_blank" rel="noopener" title="www.github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="assets/pdfs/kodak-grey-card.pdf" target="_blank" rel="noopener" title="The Great Cod" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M180.5 141.5C219.7 108.5 272.6 80 336 80s116.3 28.5 155.5 61.5c39.1 33 66.9 72.4 81 99.8 4.7 9.2 4.7 20.1 0 29.3-14.1 27.4-41.9 66.8-81 99.8-39.2 33.1-92 61.5-155.5 61.5s-116.3-28.5-155.5-61.5c-16.2-13.7-30.5-28.5-42.7-43.1l-89.7 52.3c-12.5 7.3-28.4 5.3-38.7-4.9s-12.4-26-5.3-38.6L50 256 4.2 175.9c-7.2-12.6-5-28.4 5.3-38.6s26.1-12.2 38.7-4.9l89.7 52.3c12.2-14.6 26.5-29.4 42.7-43.1zM448 256a32 32 0 1 0-64 0 32 32 0 1 0 64 0"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.tracking", "navigation.expand", "navigation.top", "navigation.instant", "navigation.instant.progress", "toc.follow", "content.tooltips"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../js/image-wipe.js"></script>
      
        <script src="../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>